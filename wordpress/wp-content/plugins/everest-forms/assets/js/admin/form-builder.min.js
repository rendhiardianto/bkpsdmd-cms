!function(v,c){var a,p={init:function(){v(document).ready(function(i){i("evf-panel-integrations-button a").hasClass("active")||(i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").first().addClass("active"),i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").hasClass("active")&&i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").next(".everest-forms-active-connections").first().addClass("active"),i(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active")),i(document).on("input change",'.everest-forms-field-option-row-choices input[name$="[label]"]',function(e){var t=i(this).val();i(this).val(t.replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))}),i(document).on("input change",'input[name$="[required-field-message]"]',function(e){var t=i(this).val();/<[^>]*>/.test(t)||/&[a-zA-Z0-9#]+;/.test(t)?i(this).val(""):i(this).val(t.replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))}),i(".wp-list-table .everest-forms-toggle-form input").each(function(){i(this).prop("checked")?i(this).closest("tr").find("td").not(".has-row-actions").removeClass("evf-disable-row"):i(this).closest("tr").find("td").not(".has-row-actions").addClass("evf-disable-row")})}),v(document).ready(function(o){"1"===o(".everest-forms-min-max-date-format input").val()&&(o(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){o(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",o(".everest-forms-max-date").val())}}),o(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){o(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",o(".everest-forms-min-date").val())}})),o(".everest-forms-min-max-date-format").each(function(){o(this).find('input[type="checkbox"]').is(":checked")?(o(this).next(".everest-forms-min-max-date-range-format").removeClass("everest-forms-hidden"),o(this).next().next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),o(this).next(".everest-forms-min-max-date-range-format").find('input[type="checkbox"]').is(":checked")&&(o(this).next().next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden"),o(this).next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"))):(o(this).next().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),o(this).next(".everest-forms-min-max-date-range-format").addClass("everest-forms-hidden"),o(this).next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"))}),o(".everest-forms-row-option select.evf-field-show-hide").each(function(){o(this).find('[selected="selected"]').prop("selected",!0)})}),0<v("#everest-forms-builder").find(".everest-forms-field-file-upload").length&&(c.is_pro||v("#everest-forms-add-fields-file-upload").addClass("evf-one-time-draggable-field")),v("evf-panel-payments-button a").hasClass("active")||(v("#everest-forms-panel-payments").find(".everest-forms-panel-sidebar a").first().addClass("active"),v(".everest-forms-panel-content").find(".evf-payment-setting-content").first().addClass("active")),v(document.body).find("#copy-shortcode").on("click",this.copyShortcode).on("aftercopy",this.copySuccess).on("aftercopyfailure",this.copyFail),v(document.body).find(".evf-copy-shortcode").each(function(){v(this).on("click",p.copyShortcode).on("aftercopy",p.copySuccess).on("aftercopyfailure",p.copyFail)}),v(document).ready(p.ready),v(window).on("load",p.load),v(document.body).on("evf-init-builder-fields",function(){p.bindFields()}).trigger("evf-init-builder-fields"),v(document.body).on("adjust_builder_width",function(){var e=v("#adminmenuwrap").width();v("#everest-forms-builder-form").css({width:"calc(100% - "+e+"px)"})}).trigger("adjust_builder_width"),v(document.body).on("click","#collapse-button",function(){v("#everest-forms-builder-form").width(""),v(document.body).trigger("adjust_builder_width")}),v(window).on("resize orientationchange",function(){clearTimeout(void 0),setTimeout(function(){v("#everest-forms-builder").width(""),v(document.body).trigger("adjust_builder_width")},250)}).trigger("resize"),p.bindPrivacyPolicyActions(),v(document.body).on("evf_field_drop_complete",function(e,t,i){var o;p.bindEditMetaKey(i),"privacy-policy"===t&&(o=c.i18n_privacy_policy_consent_message,v("#everest-forms-field-"+i).find(".evf-privacy-policy-consent-message").html(o),v("#everest-forms-field-option-"+i).find(".evf-privacy-policy-consent-message").val(o),v(".everest-forms-field-options #everest-forms-field-option-row-"+i+"-required").find("input").click()),"country"===t&&v("#everest-forms-field-option-row-"+i+"-default").find("select.evf-select2-multiple > option").prop("selected",!0)}),v(document.body).on("blur",".evf-number-of-stars[type=number]",function(){v(".evf_error_tip").fadeOut("100",function(){v(this).remove()})}).on("change click",".evf-number-of-stars[type=number]",function(e){100<parseInt(v(this).val(),10)&&(v(this).val("100"),p.livePreviewNumberOfRating(v(this)))}).on("keyup click",".evf-number-of-stars[type=number]",function(){100<parseInt(v(this).val(),10)?v(document.body).triggerHandler("evf_add_error_tip",[v(this),"i18n_field_rating_greater_than_max_value_error",c]):v(document.body).triggerHandler("evf_remove_error_tip",[v(this),"i18n_field_rating_greater_than_max_value_error"])}),v(document).on("keyup mouseup",".everest-forms-field-option-row-number_of_stars input",function(){p.livePreviewNumberOfRating(this)}),v(document).on("change",".everest-forms-field-option-row-rating-icon input[type=radio]",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id"),i=v("#everest-forms-field-"+e+" .rating-icon").find("svg").first().css("fill");$icons=v("#everest-forms-field-"+e+" .rating-icon"),iconClass='<svg width="32" height="32" viewBox="0 0 32 32" style="fill:'+i+'"><path d="M20.33 11.45L16 2.69l-4.33 8.76L2 12.86l7 6.82-1.65 9.64L16 24.77l8.65 4.55L23 19.68l7-6.82-9.67-1.41z"/></svg>',"heart"===t?iconClass='<svg width="32" height="32" viewBox="0 0 32 32" style="fill:'+i+'"><path d="M27.66 16.94L16 28 4.34 16.94a7.31 7.31 0 0 1 0-10.72A8.21 8.21 0 0 1 10 4a6.5 6.5 0 0 1 5 2l1 1s.88-.89 1-1a6.5 6.5 0 0 1 5-2 8.21 8.21 0 0 1 5.66 2.22 7.31 7.31 0 0 1 0 10.72z"/></svg>':"thumb"===t?iconClass='<svg width="32" height="32" viewBox="0 0 32 32" style="fill:'+i+'"><path d="M30 14.88a3.42 3.42 0 0 0-3.36-3.36h-4.85l.14-.42a2.42 2.42 0 0 1 .2-.39c.08-.14.14-.24.17-.31.21-.4.37-.72.48-1a7.39 7.39 0 0 0 .33-1.05A5.71 5.71 0 0 0 23 4a3.48 3.48 0 0 0-3-2 1.61 1.61 0 0 0-1.43.89C18.34 3.13 17 7 17 7a5.44 5.44 0 0 1-1 2c-.57.75-2.6 3-3.2 3.71s-1.05 1-1.33 1C10 13.74 10 15.71 10 16v9c0 .3 0 2.2 1.52 2.2a12.7 12.7 0 0 1 2.76.77A15.6 15.6 0 0 0 21 30a8.9 8.9 0 0 0 5.74-1.92C30 25 30 15.88 30 14.88zM5 14a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0v-7a3 3 0 0 0-3-3zm0 11a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></svg>':"smiley"===t?iconClass='<svg width="32" height="32" viewBox="0 0 32 32" style="fill:'+i+'"><path d="M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm4 8a2 2 0 1 1-2 2 2 2 0 0 1 2-2zm-8 0a2 2 0 1 1-2 2 2 2 0 0 1 2-2zm4 14a9.23 9.23 0 0 1-8.16-4.89l1.32-.71a7.76 7.76 0 0 0 13.68 0l1.32.71A9.23 9.23 0 0 1 16 24z"/></svg>':"bulb"===t&&(iconClass='<svg width="32" height="32" viewBox="0 0 32 32" style="fill:'+i+'"><path d="M16 2.25A9.76 9.76 0 0 0 6.25 12c0 3.21 2 5.68 3.52 7.48A6.28 6.28 0 0 1 11.25 23a.76.76 0 0 0 .75.75h8a.74.74 0 0 0 .74-.64 10 10 0 0 1 1.53-3.69c.24-.35.49-.7.75-1.06 1.28-1.77 2.73-3.79 2.73-6.36A9.76 9.76 0 0 0 16 2.25zM20 25.25h-8a.75.75 0 0 0 0 1.5h8a.75.75 0 0 0 0-1.5zM19 28.25h-6a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5z"/></svg>'),$icons.html(iconClass)}),v(document).ready(function(o){o(".everest-forms-field-option-row-icon_color input.colorpicker").wpColorPicker({change:function(e){var t=o(this),i=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");o("#everest-forms-field-"+t+" .rating-icon svg").css("fill",i)}})}),v(document).on("click",".evf-edit-meta-key-icon",function(){var e=v(this).closest(".evf-meta-key-input-wrapper"),t=e.find(".evf-input-meta-key"),i=v(this).data("meta_key");t.prop("readonly",!1).focus(),v(document).find(".evf-meta-key-copy-btn").hide(),v(this).hide(),0===e.find(".evf-meta-key-actions").length&&e.append(`
					<span class="evf-meta-key-actions">
						<span class="evf-save-meta-key-icon" style="cursor: pointer;">
							<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<rect x="1.20078" y="0.600195" width="22.8" height="22.8" rx="1.2" fill="white"/>
							<rect x="1.20078" y="0.600195" width="22.8" height="22.8" rx="1.2" stroke="#E1E1E1" stroke-width="0.8"/>
							<path d="M17.2689 8.5L10.8522 14.9167L7.93555 12" stroke="#383838" stroke-width="1.16667" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</span>
						<span class="evf-cancel-meta-key-icon" style="cursor: pointer;" data-original_value="${i}">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<rect x="0.800391" y="0.600195" width="22.8" height="22.8" rx="1.2" fill="white"/>
							<rect x="0.800391" y="0.600195" width="22.8" height="22.8" rx="1.2" stroke="#E1E1E1" stroke-width="0.8"/>
							<path d="M12.2026 12.8161L9.34427 15.6745C9.23733 15.7814 9.10122 15.8349 8.93594 15.8349C8.77066 15.8349 8.63455 15.7814 8.5276 15.6745C8.42066 15.5675 8.36719 15.4314 8.36719 15.2661C8.36719 15.1009 8.42066 14.9648 8.5276 14.8578L11.3859 11.9995L8.5276 9.14115C8.42066 9.0342 8.36719 8.89809 8.36719 8.73281C8.36719 8.56753 8.42066 8.43142 8.5276 8.32448C8.63455 8.21753 8.77066 8.16406 8.93594 8.16406C9.10122 8.16406 9.23733 8.21753 9.34427 8.32448L12.2026 11.1828L15.0609 8.32448C15.1679 8.21753 15.304 8.16406 15.4693 8.16406C15.6345 8.16406 15.7707 8.21753 15.8776 8.32448C15.9845 8.43142 16.038 8.56753 16.038 8.73281C16.038 8.89809 15.9845 9.0342 15.8776 9.14115L13.0193 11.9995L15.8776 14.8578C15.9845 14.9648 16.038 15.1009 16.038 15.2661C16.038 15.4314 15.9845 15.5675 15.8776 15.6745C15.7707 15.7814 15.6345 15.8349 15.4693 15.8349C15.304 15.8349 15.1679 15.7814 15.0609 15.6745L12.2026 12.8161Z" fill="#383838"/>
							</svg>
						</span>
					</span>
				`),0===e.find(".evf-meta-key-warning").length&&e.after(`
					<div class="evf-meta-key-warning" >
						<div class="everest-forms-meta-key-warning-icon">
							<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" clip-rule="evenodd" d="M7.99935 1.99984C4.68564 1.99984 1.99935 4.68613 1.99935 7.99984C1.99935 11.3135 4.68564 13.9998 7.99935 13.9998C11.3131 13.9998 13.9993 11.3135 13.9993 7.99984C13.9993 4.68613 11.3131 1.99984 7.99935 1.99984ZM0.666016 7.99984C0.666016 3.94975 3.94926 0.666504 7.99935 0.666504C12.0494 0.666504 15.3327 3.94975 15.3327 7.99984C15.3327 12.0499 12.0494 15.3332 7.99935 15.3332C3.94926 15.3332 0.666016 12.0499 0.666016 7.99984ZM7.99935 7.33317C8.36754 7.33317 8.66602 7.63165 8.66602 7.99984V10.6665C8.66602 11.0347 8.36754 11.3332 7.99935 11.3332C7.63116 11.3332 7.33268 11.0347 7.33268 10.6665V7.99984C7.33268 7.63165 7.63116 7.33317 7.99935 7.33317ZM7.99935 4.6665C7.63116 4.6665 7.33268 4.96498 7.33268 5.33317C7.33268 5.70136 7.63116 5.99984 7.99935 5.99984H8.00602C8.37421 5.99984 8.67268 5.70136 8.67268 5.33317C8.67268 4.96498 8.37421 4.6665 8.00602 4.6665H7.99935Z" fill="#EE9936"/>
							</svg>
						</div>
						<div>
							<strong>Caution:</strong> We don't recommend changing this unless necessary, as it affects data retrieval.
						</div>
					</div>
				`),v(document).on("click",".evf-cancel-meta-key-icon",function(){var e=v(this).closest(".evf-meta-key-input-wrapper"),t=e.find(".evf-input-meta-key"),i=v(this).data("original_value");v(document).find(".evf-meta-key-copy-btn").show(),t.val(i),t.prop("readonly",!0),e.find(".evf-meta-key-actions").remove(),e.find(".evf-edit-meta-key-icon").show(),e.next(".evf-meta-key-warning").remove()}),v(document).on("click",".evf-save-meta-key-icon",function(){var e=v(this).closest(".evf-meta-key-input-wrapper"),t=e.find(".evf-input-meta-key");v(document).find(".evf-meta-key-copy-btn").show(),t.prop("readonly",!0),e.find(".evf-meta-key-actions").remove(),e.find(".evf-edit-meta-key-icon").show(),e.next(".evf-meta-key-warning").remove()})})},copyShortcode:function(e){evfClearClipboard(),evfSetClipboard(v(this).closest(".evf-shortcode-field").find("input").val(),v(this)),e.preventDefault()},copySuccess:function(){v(this).tooltipster("content",v(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=v(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},1e3)})},copyFail:function(){v(this).closest(".evf-shortcode-field").find("input").focus().select()},load:function(){v(".everest-forms-overlay").fadeOut()},ready:function(){var e,t;a=v("#everest-forms-builder"),p.bindUIActions(),p.bindEditActions(),jconfirm.defaults={closeIcon:!0,backgroundDismiss:!0,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",columnClass:"evf-responsive-class"},"undefined"!=typeof PerfectScrollbar&&(e=v(".everest-forms-tab-content"),t=v(".everest-forms-panel"),1<=e.length&&(window.evf_tab_scroller=new PerfectScrollbar(".everest-forms-tab-content",{suppressScrollX:!0})),t.each(function(){var e=v(this),t=e.attr("id");1<=e.find(".everest-forms-panel-sidebar").length&&(window.evf_setting_scroller=new PerfectScrollbar("#"+t+" .everest-forms-panel-sidebar"))})),a.on("change",".everest-forms-field-option-row-limit_enabled input",function(e){p.updateTextFieldsLimitControls(v(e.target).parents(".everest-forms-field-option-row-limit_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-row-min_length_enabled input",function(e){p.updateTextFieldsMinLengthControls(v(e.target).parents(".everest-forms-field-option-row-min_length_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-select .everest-forms-field-option-row-enhanced_select input",function(e){p.enhancedSelectFieldStyle(v(e.target).parents(".everest-forms-field-option-row-enhanced_select").data().fieldId,e.target.checked)}),a.on("click",".everest-forms-field-option-row-choices .everest-forms-btn-group span",function(e){var t;v(this).hasClass("upgrade-modal")&&"checkbox"===v(this).data("type")?(v(this).parent().find("span").addClass("is-active"),v(this).removeClass("is-active"),p.updateEnhandedSelectField(v(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,!1)):(v(this).parent().find("span").removeClass("is-active"),v(this).addClass("is-active"),p.updateEnhandedSelectField(v(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,"multiple"===v(this).data("selection"))),"multiple"===v(this).data("selection")&&"checkbox"===v(this).data("type")&&v(this).hasClass("is-active")?(t=v(this).parent().parent().data("field-id"),v("#everest-forms-field-option-row-"+t+"-select_all").show()):(t=v(this).parent().parent().data("field-id"),v("#everest-forms-field-option-row-"+t+"-select_all").hide())}),v(document.body).on("click",'.everest-forms-field, .everest-forms-field-select[data-field-type="select"]',function(){a.find(".everest-forms-field-option-row-choices .everest-forms-btn-group span").each(function(){var e=v(this).parent().parent().data("field-id");"multiple"===v(this).data("selection")&&"checkbox"===v(this).data("type")&&v(this).hasClass("is-active")?v("#everest-forms-field-option-"+e+"-select_all").parent().parent().parent().show():v("#everest-forms-field-option-"+e+"-select_all").parent().parent().parent().hide()})}),a.on("keyup",".everest-forms-search-fields",function(){var t=v(this).val().toLowerCase();v(".evf-registered-item").each(function(){var e=v(this);field_type=e.data("field-type"),field_label=e.text().toLowerCase(),-1<field_type.search(t)||-1<field_label.search(t)?(e.addClass("evf-searched-item"),e.show()):(e.removeClass("evf-searched-item"),e.hide())}),v(".everest-forms-add-fields-group").each(function(){v(this).find(".evf-registered-item.evf-searched-item").length<=0?v(this).hide():v(this).show()}),v(".evf-registered-item.evf-searched-item").length?v(".everest-forms-fields-not-found").addClass("hidden"):v(".everest-forms-fields-not-found").removeClass("hidden")}),a.on("click","#evf-collapse",function(e){e.preventDefault();e=v(this);e.hasClass("open")?(e.removeClass("open").addClass("close"),e.closest(".everest-forms-panel-sidebar-content").removeClass("collapsed")):(e.removeClass("close").addClass("open"),e.closest(".everest-forms-panel-sidebar-content").addClass("collapsed"))}),v(document).trigger("everest_forms_ready")},updateTextFieldsLimitControls:function(e,t){t?v("#everest-forms-field-option-row-"+e+"-limit_controls").removeClass("everest-forms-hidden"):v("#everest-forms-field-option-row-"+e+"-limit_controls").addClass("everest-forms-hidden")},updateTextFieldsMinLengthControls:function(e,t){t?v("#everest-forms-field-option-row-"+e+"-min_length_controls").removeClass("everest-forms-hidden"):v("#everest-forms-field-option-row-"+e+"-min_length_controls").addClass("everest-forms-hidden")},enhancedSelectFieldStyle:function(e,t){var i=v("#everest-forms-field-"+e+" .primary-input"),e=v("#everest-forms-field-option-"+e+"-enhanced_select").is(":checked");t&&e&&i.prop("multiple")?(i.addClass("evf-enhanced-select"),v(document.body).trigger("evf-enhanced-select-init")):(i.removeClass("evf-enhanced-select enhanced"),i.filter(".select2-hidden-accessible").selectWoo("destroy"))},updateEnhandedSelectField:function(e,t){var i=v("#everest-forms-field-"+e+" .primary-input"),o=i.find(".placeholder"),n=v("#everest-forms-field-option-"+e+"-multiple_choices"),s=v("#everest-forms-field-option-row-"+e+"-choices input.default"),r=s.filter(":checked");n.val(t?1:0),i.prop("multiple",t),s.prop("type",t?"checkbox":"radio"),!t&&r.length&&(s.prop("checked",!1),v(r.get(0)).prop("checked",!0)),o.length&&t&&o.prop("selected",!t),p.enhancedSelectFieldStyle(e,t)},bindUIActions:function(){p.bindDefaultTabs(),p.checkEmptyGrid(),p.bindFields(),p.bindFormPreview(),p.bindFormPreviewWithKeyEvent(),p.bindFormEntriesWithKeyEvent(),p.bindGridSwitcher(),p.bindFieldSettings(),p.bindFieldDelete(),p.bindFieldDeleteWithKeyEvent(),p.bindCloneField(),p.bindSaveOption(),p.bindEmbedOption(),p.bindSaveOptionWithKeyEvent(),p.bindOpenShortcutKeysModalWithKeyEvent(),p.bindAddNewRow(),p.bindRemoveRow(),p.bindFormSettings(),p.bindFormEmail(),p.bindFormSmsNotifications(),p.bindFormConversational(),p.bindFormIntegrations(),p.bindFormPayment(),p.choicesInit(),p.bindToggleHandleActions(),p.bindLabelEditInputActions(),p.bindSyncedInputActions(),p.init_datepickers(),p.init_payment_subscription_plan_field(),p.bindBulkOptionActions(),p.bindAkismetInit(),p.bindFormSubmissionMinWaitingTime(),p.bindEditMetaKey(),p.bindUIActionsFields(),"field-options"===c.tab&&v(".evf-panel-field-options-button").trigger("click"),v(document.body).on("everest-forms-field-drop",".evf-registered-buttons .evf-registered-item",function(){p.fieldDrop(v(this).clone())})},bindBulkOptionActions:function(){v(document.body).on("click",".evf-toggle-bulk-options",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-add_bulk_options").slideToggle()}),v(document.body).on("click",".evf-toggle-presets-list",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row .evf-options-presets").slideToggle()}),v(document.body).on("click",".evf-add-bulk-options",function(e){var t,i=v(this).closest(".everest-forms-field-option-row"),o=i.data("field-id");i.length&&(t=i.closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices .evf-choices-list"),i=(o=i.find("textarea#everest-forms-field-option-"+o+"-add_bulk_options")).val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," ").split("\n"),p.addBulkOptions(i,t),o.val(""))}),v(document.body).on("click",".evf-options-preset-label",function(e){var t,i=v(this).closest(".everest-forms-field-option-row"),o=i.data("field-id");i.length&&(t=v(this).closest(".evf-options-preset").find(".evf-options-preset-value").val(),i.find("textarea#everest-forms-field-option-"+o+"-add_bulk_options").val(t),v(this).closest(".evf-options-presets").slideUp())}),v(document.body).on("click",".everest-forms-field-option-row-password_strength",function(){v(this).find('[type="checkbox"]:first').prop("checked")&&v(this).next().find('[type="checkbox"]:first').prop("checked",!1)}),v(document.body).on("click",".everest-forms-field-option-row-password_validation",function(){v(this).find('[type="checkbox"]:first').prop("checked")&&(v(this).prev().find('[type="checkbox"]:first').prop("checked",!1),v(this).prev().find(".everest-forms-inner-options").addClass("everest-forms-hidden"))})},addBulkOptions:function(e,i){e.forEach(function(e){var t;""!==e&&(t=i.find("li").last().find("a.add"),p.choiceAdd(null,t,e.trim()))})},init_datepickers:function(){var e=v(".everest-forms-disable-dates").data("date-format");v(".everest-forms-disable-dates").each(function(){v(this).get(0)._flatpickr||v(this).flatpickr({dateFormat:e,mode:"multiple"})}),v(document.body).on("change",".evf-date-format",function(e){var t=v(".everest-forms-field-option:visible .everest-forms-disable-dates"),i=t.get(0)._flatpickr,o=i.selectedDates,n=v(this).val(),s=[];o.forEach(function(e){s.push(flatpickr.formatDate(e,n))}),i.set("dateFormat",n),t.val(s.join(", "))}),v(document.body).on("click",".evf-clear-disabled-dates",function(){v(".everest-forms-field-option:visible .everest-forms-disable-dates").get(0)._flatpickr.clear()}),v(".everest-forms-field-date-time").each(function(){var e=v(this).attr("data-field-id");p.dateSettingToggler(e,v("#everest-forms-field-option-"+e+"-datetime_style").val())}),v(".everest-forms-slot-booking input").is(":checked")&&(disable_past_date=v(document).find(".everest-forms-past-date-disable-format input"),required=v(document).find(".everest-forms-field-option-row-required input"),disable_past_date.attr("checked",!0),required.prop("checked",!0),disable_past_date.parent().parent().parent().hide())},init_payment_subscription_plan_field:function(){v(".evf-radio-subscription-expiry-input").each(function(){v(this).get(0)._flatpickr||v(this).flatpickr()});var e=v(".evf-enable-trial-period"),t=v(".evf-enable-expiry-date"),e=(v.each(e,function(e,t){var i;v(t).is(":checked")?(i=t.closest("li"),v(i).find(".evf-subscription-trail-period-option").show()):(i=t.closest("li"),v(i).find(".evf-subscription-trail-period-option").hide()),v(t).on("click",function(e){var t=v(this).closest("li");v(this).is(":checked")?v(t).find(".evf-subscription-trail-period-option").show():v(t).find(".evf-subscription-trail-period-option").hide()})}),v.each(t,function(e,t){var i;v(t).is(":checked")?(i=t.closest("li"),v(i).find(".evf-subscription-expiry-date").show()):(i=t.closest("li"),v(i).find(".evf-subscription-expiry-date").hide()),v(t).on("click",function(e){var t=v(this).closest("li");v(this).is(":checked")?v(t).find(".evf-subscription-expiry-date").show():v(t).find(".evf-subscription-expiry-date").hide()})}),v(document.body).on("evf_after_field_append",function(e,t){"payment-subscription-plan"===v("#"+t).attr("data-field-type")&&(v("#everest-forms-panel-field-paypal-recurring"),v("#everest-forms-panel-field-paypal-interval_count-wrap").hide(),v("#everest-forms-panel-field-paypal-period-wrap").hide(),v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide())}),v(document.body).on("evf_before_field_deleted",function(e,t){"payment-subscription-plan"===v("#everest-forms-field-"+t).attr("data-field-type")&&(v("#everest-forms-panel-field-paypal-interval_count-wrap").show(),v("#everest-forms-panel-field-paypal-period-wrap").show(),v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide())}),v("#everest-forms-panel-field-paypal-recurring")),i=v(".everest-forms-field-wrap"),t=(0<v(i).find(".everest-forms-field-payment-subscription-plan").length&&(v(e).is(":checked")&&(v("#everest-forms-panel-field-paypal-interval_count-wrap").hide(),v("#everest-forms-panel-field-paypal-period-wrap").hide(),v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide()),v(e).on("click",function(e){v("#everest-forms-panel-field-paypal-interval_count-wrap").hide(),v("#everest-forms-panel-field-paypal-period-wrap").hide(),v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide()})),v("#everest-forms-panel-field-stripe-recurring")),i=v(".everest-forms-field-wrap");0<v(i).find(".everest-forms-field-payment-subscription-plan").length&&v(t).is(":checked")&&(v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide()),v(t).on("click",function(e){v(this).is(":checked")&&0<v(i).find(".everest-forms-field-payment-subscription-plan").length&&(v("#everest-forms-panel-field-stripe-plan_name-wrap").hide(),v("#everest-forms-panel-field-stripe-interval_count-wrap").hide(),v("#everest-forms-panel-field-stripe-period-wrap").hide())})},bindEditActions:function(){v("#edit-form-name").on("click",function(e){e.stopPropagation(),""!==v("#evf-edit-form-name").val().trim()&&p.toggleEditTitle(e)}),v("#evf-edit-form-name").on("change keypress",function(e){var t=v(this);e.stopPropagation(),13===e.which&&""!==v(this).val().trim()&&p.toggleEditTitle(e),""!==t.val().trim()&&v("#everest-forms-panel-field-settings-form_title").val(t.val().trim())}).on("click",function(e){e.stopPropagation()}),v(document).not(v(".everest-forms-title-desc")).on("click",function(e){var t=v("#evf-edit-form-name");e.stopPropagation(),!t.prop("disabled")&&t.val()&&""!==t.val().trim()&&p.toggleEditTitle(e)})},toggleEditTitle:function(e){var t=v("#edit-form-name").siblings("#evf-edit-form-name");e.preventDefault(),t.prop("disabled",function(e,t){return!t}),t.hasClass("everst-forms-name-editing")||t.focus(),t.toggleClass("everst-forms-name-editing")},formObject:function(e){for(var t=jQuery(e).find("[name]"),i={},o={},n=0;n<t.length;n++){var s=jQuery(t[n]),r=s.prop("name").replace(/\]/gi,"").split("["),a=s.val(),d={};if(!s.is(":radio")&&!s.is(":checkbox")||s.is(":checked")){for(var l=r.length-1;0<=l;l--){var f=r[l];if(0===(f=void 0===f?"":f).length&&(d=[],"undefined"==typeof o[r[l-1]]?o[r[l-1]]=0:o[r[l-1]]+=1,f=o[r[l-1]]),l===r.length-1){if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if(isNaN(parseFloat(a))||parseFloat(a).toString()!==a)if("string"!=typeof a||"{"!==a.substr(0,1)&&"["!==a.substr(0,1)){if("object"==typeof a&&a.length&&s.is("select")){for(var c={},l=0;l<a.length;l++)c["n"+l]=a[l];a=c}}else try{a=JSON.parse(a)}catch(m){}else a=parseFloat(a);d[f]=a}else{var p=d;(d={})[f]=p}}v.extend(!0,i,d)}}return i},bindUIActionsFields:function(){a.on("click",".everest-forms-field-option-row-choices .add",function(e){p.choiceAdd(e,v(this))}),a.on("click",".everest-forms-field-option-row-choices .remove",function(e){p.choiceDelete(e,v(this))}),a.on("mousedown",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=v(this);e.is(":checked")?e.attr("data-checked","1"):e.attr("data-checked","0")}),a.on("click",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=v(this),t=e.parent().parent();e.parent().parent().find("input[type=radio]").not(this).prop("checked",!1),"1"===e.attr("data-checked")&&(e.prop("checked",!1),e.attr("data-checked","0")),p.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-choices input[type=checkbox]",function(e){var t=v(this).parent().parent();p.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("keyup paste focusout",".everest-forms-field-option-row-choices input.label, .everest-forms-field-option-row-choices input.value",function(e){var t=v(this).parent().parent().parent();p.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-show_values input",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices ul").toggleClass("show-values")}),a.on("change",".everest-forms-field-option-row-choices_images input",function(){var e=v(this),t=e.parent().parent().parent().data("field-id"),i=v("#everest-forms-field-option-"+t),o=v("#everest-forms-field-option-"+t+"-input_columns"),n=v("#everest-forms-field-option-"+t).find(".everest-forms-field-option-hidden-type").val();e.parent().find(".notice").toggleClass("hidden"),i.find(".everest-forms-field-option-row-choices ul").toggleClass("show-images"),(e.is(":checked")?o.val("inline"):o.val("")).trigger("change"),p.choiceUpdate(n,t)}),a.on("click",".everest-forms-attachment-media-view .upload-button",function(e){var t,i,o=v(this);e.preventDefault(),(i=wp.media.frames.everestforms_media_frame=wp.media({title:c.i18n_upload_image_title,className:"media-frame everest-forms-media-frame",frame:"select",multiple:!1,library:{type:"image"},button:{text:c.i18n_upload_image_button}})).on("select",function(){var e=i.state().get("selection").first().toJSON();(t=(o.hasClass("button-add-media")?(o.hide(),o):o.parent().parent()).parent()).find(".source").val(e.url),t.find(".attachment-thumb").remove(),t.find(".thumbnail-image").prepend('<img class="attachment-thumb" src="'+e.url+'">'),t.find(".actions").show(),a.trigger("everestFormsImageUploadAdd",[o,t])}),i.open()}),a.on("click",".everest-forms-attachment-media-view .remove-button",function(e){e.preventDefault();e=v(this).parent().parent();e.find(".attachment-thumb").remove(),e.parent().find(".source").val(""),e.parent().find(".button-add-media").show(),a.trigger("everestFormsImageUploadRemove",[v(this),e])}),a.on("everestFormsImageUploadAdd everestFormsImageUploadRemove",function(e,t,i){var i=i.closest(".evf-choices-list"),o=i.data("field-type"),i=i.data("field-id");p.choiceUpdate(o,i)}),a.on("change",".everest-forms-field-option-row-input_columns select",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id"),i="";"inline"===t?i="everest-forms-list-inline":""!==t&&(i="everest-forms-list-"+t+"-columns"),v("#everest-forms-field-"+e).removeClass("everest-forms-list-inline everest-forms-list-2-columns everest-forms-list-3-columns").addClass(i)}),a.on("click",".everest-forms-fields-tab a",function(e){e.preventDefault(),p.fieldTabChoice(v(this).attr("id"))}),v(document).on("mouseenter",'.everest-forms-tabs li[class*="part_"]',function(){!1===v(this).hasClass("active")&&(v(document).find(".everest-forms-field").hasClass("ui-sortable-helper")||v(document).find(".evf-registered-buttons button.evf-registered-item").hasClass("field-dragged"))&&v(this).find("a").trigger("click")}),a.on("change",".everest-forms-field-option-address input.hide",function(){var e=v(this),t=e.parent().parent().data("field-id"),e=e.parent().parent().data("subfield");v("#everest-forms-field-"+t).find(".everest-forms-"+e).toggleClass("hidden")}),a.on("input",".everest-forms-field-option-row-label input",function(){var e=v(this),t=e.val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "),e=e.parent().data("field-id"),e=v("#everest-forms-field-"+e).find(".label-title .text");e.hasClass("nl2br")?e.html(t.replace(/\n/g,"<br>")):"private-note"===e.prevObject.data("field-type")?e.html(t+=" (Admin Only)"):e.html(t)}),a.on("change",".everest-forms-field-option-row-enable_prepopulate input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("parameter_name"),v(e.target).is(":checked")?v("#everest-forms-field-option-row-"+t+"-parameter_name").show():v("#everest-forms-field-option-row-"+t+"-parameter_name").hide()}),a.on("change",".everest-forms-field-option-row-enable_regex_validation input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("regex_value"),v(e.target).is(":checked")?(v("#everest-forms-field-option-row-"+t+"-regex_value").show(),v("#everest-forms-field-option-row-"+t+"-regex_message").show()):(v("#everest-forms-field-option-row-"+t+"-regex_value").hide(),v("#everest-forms-field-option-row-"+t+"-regex_message").hide())}),a.on("input",".everest-forms-field-option-row-description textarea",function(){var e=v(this),t=e.parent().data("field-id"),t=v("#everest-forms-field-"+t).find(".description"),e=(e=e.val()).replace(/<\s*script/gi,"").replace(/<\s*iframe/gi,"").replace(/\s+on\w+\s*=/gi," ");t.hasClass("nl2br")?t.html(e.replace(/\n/g,"<br>")):t.html(e)}),a.on("change",".everest-forms-field-option-row-required input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("required"),v(e.target).is(":checked")?(v("#everest-forms-field-option-row-"+t+"-required_field_message_setting").show(),v("#everest-forms-field-option-"+t+"-required_field_message_setting-individual").is(":checked")&&v("#everest-forms-field-option-row-"+t+"-required-field-message").show()):(v("#everest-forms-field-option-row-"+t+"-required_field_message_setting").hide(),v("#everest-forms-field-option-row-"+t+"-required-field-message").hide(),(slot_booking=v(document).find(".everest-forms-slot-booking input")).prop("checked",!1),v(document).find(".everest-forms-past-date-disable-format input").parent().parent().parent().show())}),a.on("change",".everest-forms-field-option-row-required_field_message_setting input",function(e){var t=v(this).parent().parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("required_field_message_setting"),"individual"===v(this).val()?v("#everest-forms-field-option-row-"+t+"-required-field-message").show():v("#everest-forms-field-option-row-"+t+"-required-field-message").hide()}),a.on("change",".everest-forms-field-option-row-confirmation input",function(e){var t=v(this).parent().parent().parent().data("field-id");v(e.target).is(":checked")?(v("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled"),v("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled")):(v("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"),v("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"))}),a.on("change",".everest-forms-slot-booking input",function(e){v(this).is(":checked")?(disable_past_date=v(document).find(".everest-forms-past-date-disable-format input"),(required=v(document).find(".everest-forms-field-option-row-required input")).is(":not(:checked)")&&required.prop("checked",!0),disable_past_date.is(":not(:checked)")&&disable_past_date.prop("checked",!0),disable_past_date.parent().parent().parent().hide()):disable_past_date.parent().parent().parent().show()}),a.on("input",".everest-forms-field-option-row-placeholder input",function(e){var t=v(this),i=t.val(),t=t.parent().data("field-id"),t=v("#everest-forms-field-"+t).find(".widefat:not(.secondary-input)");t.is("select")?i.length?(t.find(".placeholder").length?t.find(".placeholder").text(i):t.prepend('<option class="placeholder" selected>'+i+"</option>"),t.data("placeholder",i),t.hasClass("enhanced")&&t.parent().find(".select2-search__field").prop("placeholder",i)):t.find(".placeholder").remove():t.attr("placeholder",i)}),a.on("input",".everest-forms-field-option-address input.placeholder",function(e){var t=v(this),i=t.val(),o=t.parent().parent().data("field-id"),t=t.parent().parent().data("subfield");v("#everest-forms-field-"+o).find(".everest-forms-"+t+" input").attr("placeholder",i)}),a.on("input",".everest-forms-field-option-row-confirmation_placeholder input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".secondary-input").attr("placeholder",t)}),a.on("input",".everest-forms-field-option-row-card_number_placeholder input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".everest-forms-authorize-net-card-number input").attr("placeholder",t)}),a.on("input",".everest-forms-field-option-row-cvc_placeholder  input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".everest-forms-authorize-net-cvc input").attr("placeholder",t)}),a.on("change",".everest-forms-field-option-row-label_hide input",function(){var e=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("label_hide")}),a.on("change",".everest-forms-field-option-row-sublabel_hide input",function(){var e=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("sublabel_hide")}),a.on("change",".everest-forms-field-option-row-datetime_format select, .everest-forms-field-option-row-phone_format select, .everest-forms-field-option-row-item_price select, .everest-forms-field-option-row-format select",function(e){var t=v(this),i=t.val(),t=t.parent().data("field-id");v("#everest-forms-field-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i),v("#everest-forms-field-option-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i)}),a.on("change",".everest-forms-field-option-row-datetime_style select",function(){p.dateSettingToggler(v(this).parent().attr("data-field-id"),v(this).val())}),v(".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]").each(function(){v(this).prop("checked")?(v(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [for*=select_min_time]").show(),v(this).parent().parent().find(".input-group-col-2").has("[for*=select_max_time]").show()):(v(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),v(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),v(this).parent().parent().find("[for*=select_min_time]").hide(),v(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("click",".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]",function(){v(this).prop("checked")?(v(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),v(this).parent().parent().find("[for*=select_min_time]").show(),v(this).parent().parent().find("[for*=select_max_time]").show()):(v(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),v(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),v(this).parent().parent().find("[for*=select_min_time]").hide(),v(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("change",".everest-forms-field-option-row-time_interval_format select[id*=time_format]",function(){min_hour=v(this).parent().siblings(".input-group-col-2").find("[id*=min_time_hour]"),max_hour=v(this).parent().siblings(".input-group-col-2").find("[id*=max_time_hour]");var e,t,o=min_hour.find("option:selected").val(),n=max_hour.find("option:selected").val(),s="";for(i=0;i<=23;i++)"H:i"===v(this).val()?s+='<option value = "'+i+'">'+(i<10?"0"+i:i)+"</option>":(e=" PM",0==(t=i<12?(e=" AM",i):i-12)&&(t=12),s+='<option value = "'+i+'">'+t+e+"</option>");min_hour.html(s),max_hour.html(s),min_hour.find("option[value="+o+"]").prop("selected",!0),max_hour.find("option[value="+n+"]").prop("selected",!0)})},dateSettingToggler:function(e,t){"picker"==t?(v("#everest-forms-field-option-row-"+e+"-placeholder").show(),v("#everest-forms-field-option-"+e+"-disable_dates").show(),v("label[for=everest-forms-field-option-"+e+"-disable_dates]").show(),v("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").show(),v(".everest-forms-field-option-row-date_format .time_interval").show(),v("#everest-forms-field-option-"+e+"-date_localization").show(),v("label[for=everest-forms-field-option-"+e+"-date_localization]").show(),v("#everest-forms-field-option-"+e+"-date_default").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-past_date_disable").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-enable_min_max").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-enable_min_max").prop("checked")&&(v("#everest-forms-field-option-"+e+"-set_date_range").parent().show(),(v("#everest-forms-field-option-"+e+"-set_date_range").prop("checked")?v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-range-option"):v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option")).removeClass("everest-forms-hidden")),v("#everest-forms-field-option-"+e+"-time_interval").show(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").parent().parent().parent().hide(),v("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").hide(),v("label[for=everest-forms-field-option-"+e+"-select_min_time]").hide(),v("label[for=everest-forms-field-option-"+e+"-select_max_time]").hide(),v("#everest-forms-field-option-"+e+"-min_time_hour").parent().hide(),v("#everest-forms-field-option-"+e+"-max_time_hour").parent().hide()):(v("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").hide(),v("#everest-forms-field-option-"+e+"-date_default").parent().parent().parent().hide(),v("#everest-forms-field-option-"+e+"-past_date_disable").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-placeholder").hide(),v("#everest-forms-field-option-"+e+"-enable_min_max").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option").addClass("everest-forms-hidden"),v("#everest-forms-field-option-"+e+"-set_date_range").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),v("#everest-forms-field-option-"+e+"-disable_dates").hide(),v("label[for=everest-forms-field-option-"+e+"-disable_dates]").hide(),v(".everest-forms-field-option-row-date_format .everest-forms-checklist").hide(),v(".everest-forms-field-option-row-date_format .time_interval").hide(),v("#everest-forms-field-option-"+e+"-date_localization").hide(),v("label[for=everest-forms-field-option-"+e+"-date_localization]").hide(),v("#everest-forms-field-option-"+e+"-time_interval").hide(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").parent().parent().parent().show(),v("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").show(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").prop("checked")&&(v("label[for=everest-forms-field-option-"+e+"-select_min_time]").show(),v("label[for=everest-forms-field-option-"+e+"-select_max_time]").show(),v("#everest-forms-field-option-"+e+"-min_time_hour").parent().show(),v("#everest-forms-field-option-"+e+"-max_time_hour").parent().show()))},choicesInit:function(e){v(e=e||".everest-forms-field-option-row-choices ul").sortable({items:"li",axis:"y",handle:".sort",scrollSensitivity:40,stop:function(e){var e=v(e.target).attr("data-field-id"),t=v("#everest-forms-field-option-"+e).find(".everest-forms-field-option-hidden-type").val();p.choiceUpdate(t,e)}})},choiceAdd:function(e,t,i){e&&e.preventDefault&&e.preventDefault();var e=v(t),t=e.parent(),o=t.find("input.default").is(":checked"),e=e.closest(".everest-forms-field-option-row-choices").data("field-id"),n=t.parent().attr("data-next-id"),s=t.parent().data("field-type"),r=t.clone().insertAfter(t);r.attr("data-key",n),r.find("input.label").val(i).attr("name","form_fields["+e+"][choices]["+n+"][label]"),r.find("input.value").val(i).attr("name","form_fields["+e+"][choices]["+n+"][value]"),r.find("input.source").val("").attr("name","form_fields["+e+"][choices]["+n+"][image]"),r.find("input.default").attr("name","form_fields["+e+"][choices]["+n+"][default]").prop("checked",!1),r.find(".attachment-thumb").remove(),r.find(".button-add-media").show(),!0===o&&t.find("input.default").prop("checked",!0),n++,t.parent().attr("data-next-id",n),a.trigger("everestFormsChoiceAdd"),p.choiceUpdate(s,e)},choiceDelete:function(e,t){e.preventDefault();e=v(t),t=e.parent().parent();t.find("li").length<2?v.alert({title:!1,content:c.i18n_field_error_choice,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):(e.parent().remove(),p.choiceUpdate(t.data("field-type"),t.data("field-id")),a.trigger("everestFormsChoiceDelete"))},choiceUpdate:function(n,s){var e,t,r,i=v("#everest-forms-field-option-"+s);$primary=v("#everest-forms-field-"+s+" .primary-input"),"radio"===n||"checkbox"===n||"payment-multiple"===n||"payment-checkbox"===n?(e=[],i=p.formObject(i).form_fields[s],v("#everest-forms-field-option-"+s).find(".evf-choices-list li").each(function(){e.push(v(this).data("key"))}),t=wp.template("everest-forms-field-preview-choices"),data={type:n="checkbox"===n||"payment-checkbox"===n?"checkbox":"radio",order:e,settings:i,amountFilter:p.amountFilter},v("#everest-forms-field-"+s).find("ul.primary-input").replaceWith(t(data))):("select"===n&&(r="<option>{label}</option>",$primary.find("option").not(".placeholder").remove()),v("#everest-forms-field-option-row-"+s+"-choices .evf-choices-list li").each(function(e){var t=v(this),i=t.find("input.label").val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "),t=t.find("input.default").is(":checked"),o=v(r.replace("{label}",i));if(v("#everest-forms-field-"+s+" .primary-input").append(o),i&&!0===t)switch(n){case"select":o.prop("selected",!0);break;case"radio":case"checkbox":o.find("input").prop("checked",!0)}}))},amountFilter:function(e,t){return"right"===e.currency_symbol_pos?t+" "+e.currency_symbol:e.currency_symbol+" "+t},bindFormSettings:function(){v("body").on("click",".evf-setting-panel",function(e){var t;v(this).hasClass("upgrade-addons-settings")||(t=v(this).attr("data-section"),v(".evf-setting-panel").removeClass("active"),v(".everest-forms-active-email").removeClass("active"),v(".everest-forms-active-sms-notifications").removeClass("active"),v(".everest-forms-active-conversational-forms").removeClass("active"),v(".evf-content-section").removeClass("active"),v(this).addClass("active"),v(".evf-content-"+t+"-settings").addClass("active"),e.preventDefault())}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormEmail:function(){v("body").on("click",".everest-forms-panel-sidebar-section-email",function(e){v(this).siblings(".everest-forms-active-email").removeClass("active"),v(this).next(".everest-forms-active-email").addClass("active");var t=v(this).siblings(".everest-forms-active-email.active").find(".everest-forms-active-email-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormSmsNotifications:function(){v("body").on("click",".everest-forms-panel-sidebar-section-sms-notifications",function(e){v(this).siblings(".everest-forms-active-sms-notifications").removeClass("active"),v(this).next(".everest-forms-active-sms-notifications").addClass("active");var t=v(this).siblings(".everest-forms-active-sms-notifications.active").find(".everest-forms-active-sms-notifications-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormConversational:function(){v("body").on("click",".everest-forms-panel-sidebar-section-conversational-forms ",function(e){v(this);v(this).siblings(".everest-forms-active-conversational-forms").removeClass("active"),v(this).next(".everest-forms-active-conversational-forms").addClass("active");var t=v(this).siblings(".everest-forms-active-conversational-forms.active");t.length&&t.children(".evf-content-tab ").trigger("click"),e.preventDefault()})},bindFormIntegrations:function(){v("body").on("click",".evf-integrations-panel",function(e){var t=v(this).attr("data-section"),i=(v(".evf-integrations-panel").removeClass("active"),v("#everest-forms-panel-integrations").find(".evf-panel-content-section").removeClass("active"),v(this).addClass("active"),v(this).parent().find(".everest-forms-active-connections").removeClass("active"),v(this).next(".everest-forms-active-connections").addClass("active"),v(this).siblings(".everest-forms-active-connections.active").find(".everest-forms-active-connections-list li"));i.length&&i.children(".user-nickname").first().trigger("click"),v(".evf-panel-content-section-"+t).addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormPayment:function(){v("body").on("click",".evf-payments-panel",function(e){var t=v(this).attr("data-section");v(".evf-payments-panel").removeClass("active"),v(this).siblings().removeClass("icon active"),v(this).addClass("active"),v(this).parents("#everest-forms-panel-payments").find(".evf-payment-setting-content").removeClass("active").hide(),v(".evf-content-"+t+"-settings").addClass("active").show(),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},removeRow:function(e){v.each(e.find(".everest-forms-field"),function(){var e=v(this).attr("data-field-id"),e=v("#everest-forms-field-option-"+e);v(this).remove(),e.remove()}),e.remove()},bindRemoveRow:function(){v("body").on("click",".evf-delete-row",function(){var e=v(this),t=v(".evf-admin-row").length,i=e.closest(".evf-admin-row"),o=i.attr("data-row-id"),e=e.parents(".evf-admin-field-container").attr("data-current-part"),n=v("#everest-forms-builder").hasClass("multi-part-activated");(t=e&&n?v("#part_"+e).find(".evf-admin-row").length:t)<2?v.alert({title:c.i18n_row_locked,content:c.i18n_single_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_delete_row_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){p.removeRow(i),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),v("#everest-forms-row-option-row_"+o).remove()}},cancel:{text:c.i18n_cancel}}})})},bindAddNewRow:function(){v("body").on("click",".evf-add-row span",function(){v("#add-fields").trigger("click");var t,e=v(this),i=v(".evf-admin-field-wrapper"),o=v(".evf-admin-row").map(function(){return v(this).data("row-id")}).get(),o=Math.max.apply(Math,o),n=v(".evf-admin-row").eq(0).clone(),s=e.parent().attr("data-total-rows"),r=e.parents(".evf-admin-field-container").attr("data-current-part");o++,s++,r&&(i=v(".evf-admin-field-wrapper").find("#part_"+r)),n.find(".evf-admin-grid").html(""),n.attr("data-row-id",o),e.parent().attr("data-total-rows",s),e.parent().attr("data-next-row-id",o),0<v(".everest-forms-row-options").length&&!1===e.closest(".evf-add-row").hasClass("repeater-row")?(n.find("div").hide(),n.css({padding:"40px"}).append('<i class="spinner is-active" style="margin:0px auto;"></i>'),i.append(n),p.bindFields(),p.checkEmptyGrid(),t=n.attr("data-row-id"),r=window.evf_data,v.ajax({url:r.ajax_url,type:"POST",data:{action:"everest_forms_new_row",security:r.evf_add_row_nonce,form_id:r.form_id,row_id:t},success:function(e){!0===e.success&&"undefined"!=typeof e.data.html&&(v(document).find(".everest-forms-row-option-group").append(e.data.html),p.conditionalLogicAppendRow(t),v("#everest-forms-panel-field-form_rows-connection_row_"+t+"-conditional_logic_status").prop("checked",!1))}}).always(function(){n.css({padding:0}),n.find("div").show(),n.find(".evf-toggle-row-content").css("display","none"),n.find("i").remove(),e.trigger("everest-forms-after-add-row",n)})):(i.append(n),p.bindFields(),p.checkEmptyGrid(),e.trigger("everest-forms-after-add-row",n))})},bindCloneField:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-duplicate",function(){var e=v(this).closest(".everest-forms-field");e.hasClass("no-duplicate")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_duplicate_field_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){p.cloneFieldAction(e)}},cancel:{text:c.i18n_cancel}}})}),v("body").on("click",".evf-admin-row .evf-duplicate-row",function(){var e=v(this).closest(".evf-admin-row");e.find(".everest-forms-field").hasClass("no-duplicate")?v.alert({title:c.i18n_field_locked,content:c.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_duplicate_row_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){p.cloneRowAction(e)}},cancel:{text:c.i18n_cancel}}})})},cloneRowAction:function(t){row_ids=v(".evf-admin-row").map(function(){return v(this).data("row-id")}).get(),max_row_id=Math.max.apply(Math,row_ids),row_clone=t.clone(),total_rows=v(".evf-add-row").attr("data-total-rows"),max_row_id++,total_rows++,row_clone.attr("data-row-id",max_row_id),v(".evf-add-row").attr("data-total-rows",total_rows),v(".evf-add-row").attr("data-next-row-id",max_row_id);var e={action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:c.form_id,fields:row_clone.find(".everest-forms-field").length};v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){"boolean"==typeof e.success&&!0===e.success&&(t.after(row_clone),v.each(e.data,function(e,t){var i=t.field_id,t=t.field_key,i=(v("#everest-forms-field-id").val(i),(field=row_clone.find(".everest-forms-field").eq(e)).attr("data-field-id"));p.render_node(field,i,t),field.remove(),v(document.body).trigger("init_field_options_toggle")}),p.bindFields())}})},cloneFieldAction:function(i){var o=i.attr("data-field-id"),e=c.form_id;v.ajax({url:c.ajax_url,data:{action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:e},type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){var t;"boolean"==typeof e.success&&!0===e.success&&(t=e.data.field_id,e=e.data.field_key,v("#everest-forms-field-id").val(t),p.render_node(i,o,e),v(document.body).trigger("init_field_options_toggle"))}})},render_node:function(e,o,n){var t=v(".everest-forms-field-options #everest-forms-field-option-"+o),i=v("#everest-forms-field-option-"+o+"-label").val(),s=v("#everest-forms-field-option-"+o+"-meta-key").length?v("#everest-forms-field-option-"+o+"-meta-key").val():"",r=e.attr("data-field-type"),a=t.html(),i=i+" "+c.i18n_copy,s="html"!==r?s.replace(/\(|\)/g,"").toLowerCase().substring(0,s.lastIndexOf("_"))+"_"+Math.floor(1e3+9e3*Math.random()):"",d=e.clone(),l=new RegExp(o,"g"),a=a.replace(l,n),f=v('<div class="everest-forms-field-option everest-forms-field-option-'+r+'" id="everest-forms-field-option-'+n+'" data-field-id="'+n+'" />');f.append(a),v.each(t.find(":input"),function(){var e,t=v(this).attr("type"),i=(v(this).attr("name")?v(this).attr("name"):"").replace(l,n);"text"===t||"hidden"===t?(e=v(this).val(),f.find('input[name="'+i+'"]').val(e),f.find('input[value="'+o+'"]').val(n)):"checkbox"===t||"radio"===t?v(this).is(":checked")?f.find('input[name="'+i+'"]').prop("checked",!0).attr("checked","checked"):f.find('[name="'+i+'"]').prop("checked",!1).attr("checked",!1):v(this).is("select")?v(this).find("option:selected").length&&(e=v(this).find("option:selected").val(),f.find('[name="'+i+'"]').find('[value="'+e+'"]').prop("selected",!0)):""!==v(this).val()&&f.find('[name="'+i+'"]').val(v(this).val())}),v(".everest-forms-field-options").append(f),v("#everest-forms-field-option-"+n+"-label").val(i),v("#everest-forms-field-option-"+n+"-meta-key").val(s),d.attr("class",e.attr("class")),d.attr("id","everest-forms-field-"+n),d.attr("data-field-id",n),d.attr("data-field-type",r),d.find(".label-title .text").text(i),e.closest(".evf-admin-grid").find('[data-field-id="'+o+'"]').after(d),v(document).trigger("everest-form-cloned",[n,r]),p.switchToFieldOptionPanel(n),v(document.body).trigger("evf_render_node_complete",[r,n,d,f])},bindFieldDelete:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-delete",function(){var i=v(this).closest(".everest-forms-field"),e=i.attr("data-field-id"),o=v("#everest-forms-field-option-"+e);v(this).closest(".evf-admin-grid");i.hasClass("no-delete")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){v(".evf-panel-fields-button").trigger("click"),i.fadeOut("slow",function(){var e=i.attr("data-field-id"),t=i.attr("data-field-type");v(document.body).trigger("evf_before_field_deleted",[e]),i.remove(),o.remove(),p.checkEmptyGrid(),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),p.conditionalLogicRemoveField(e),p.conditionalLogicRemoveFieldIntegration(e),p.paymentFieldRemoveFromQuantity(e),p.oneTimeDraggableRemoveField(t)})}},cancel:{text:c.i18n_cancel}}})})},bindFieldDeleteWithKeyEvent:function(){v("body").on("keyup",function(e){var t,i=v(".everest-forms-preview .everest-forms-field.active");46===e.which&&!0===i.hasClass("active")&&!1===i.hasClass("evf-delete-event-active")&&0!=v(".evf-admin-row").hasClass("evf-hover")&&(i.addClass("evf-delete-event-active"),e=i.attr("data-field-id"),t=v("#everest-forms-field-option-"+e),i.hasClass("no-delete")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"],action:function(){i.removeClass("evf-delete-event-active")}}}}):v.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){v(".evf-panel-fields-button").trigger("click"),i.fadeOut("slow",function(){var e=i.attr("data-field-id");v(document.body).trigger("evf_before_field_deleted",[e]),i.remove(),t.remove(),p.checkEmptyGrid(),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),p.conditionalLogicRemoveField(e),p.conditionalLogicRemoveFieldIntegration(e),p.paymentFieldRemoveFromQuantity(e)}),i.removeClass("evf-delete-event-active")}},cancel:{text:c.i18n_cancel,action:function(){i.removeClass("evf-delete-event-active")}}}}))})},bindSaveOption:function(){v("body").on("click",".everest-forms-save-button",function(){var t=v(this),e=v("form#everest-forms-builder-form"),i=p.getStructure(),o=e.serializeArray(),n=v("#evf-edit-form-name").val().trim();if(v(document).trigger("everest_forms_save_args",[o]),""===n)v.alert({title:c.i18n_field_title_empty,content:c.i18n_field_title_payload,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}});else{e.triggerHandler("everest_forms_process_ajax_data",[t,o])&&(o=e.triggerHandler("everest_forms_process_ajax_data",[t,o])),v(".everest-forms-panel-content-wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});for(var s,r=[],a=(v(".everest-forms-field[data-field-id]").each(function(){r.push(v(this).attr("data-field-id"))}),o.length);a--;)o[a].name.startsWith("form_fields")&&(s=!1,r.forEach(function(e){o[a].name.startsWith("form_fields["+e+"]")&&(s=!0)}),-1<a)&&!1===s&&o.splice(a,1);n=o.concat(i),e={action:"everest_forms_save_form",security:c.evf_save_form,form_data:JSON.stringify(n)};v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){t.addClass("processing"),t.find(".loading-dot").remove(),t.append('<span class="loading-dot"></span>')},success:function(e){t.removeClass("processing"),t.find(".loading-dot").remove(),v(document).trigger("everest_forms_save_data",e.data),e.success||v.alert({title:e.data.errorTitle,content:e.data.errorMessage,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}),v(".everest-forms-panel-content-wrap").unblock()}})}})},bindEmbedOption:function(){v("body").on("click",".everest-forms-embed-button",function(){var e={action:"everest_forms_embed_form",security:c.evf_embed_form},t=v(this);v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){t.addClass("processing"),t.find(".loading-dot").remove(),t.append('<span class="loading-dot"></span>')},success:function(e){t.removeClass("processing"),t.find(".loading-dot").remove();var o="",o='<div class="everest_forms_hide_container"><p>We can help embed your form with just a few clicks!</p><button class="everest-forms-btn everest-forms-select-existing-page">Select Existing Page</button><button class="everest-forms-btn everest-forms-create-new-page">Create New Page</button></div><div class="everest-forms-show-exist-page"></div>';v.alert({title:"<h4>Embed in Page</h4>",content:o,type:"blue",onContentReady:function(){var i=v(".everest-forms-embed-button").attr("data-form_id");v(".jconfirm-buttons").hide(),v(".everest-forms-select-existing-page").click(function(){v(".everest_forms_hide_container").hide();var t="<option disabled selected>Select Page</option>";e.data.forEach(e=>{t+='<option data-id="'+e.ID+'" value="'+e.ID+'">'+e.post_title+"</option>"});o='<div class="everest-forms-select-existing-post-container"><p>Select the page you would like to embed your form in.</p><select name="everest-forms-select-existing-page-name" id="everest-forms-select-existing-page-name">'+t+'</select><button class="everest-forms-lets-go-btn" style="cursor:pointer">Lets Go!</button><div style="cursor:pointer" class="everest-forms-show-container">Go Back</div></div>',v(".everest-forms-show-exist-page").append(o),v(".everest-forms-show-container").click(function(){v(".everest_forms_hide_container").show(),v(".everest-forms-select-existing-post-container").remove()}),v(".everest-forms-select-existing-post-container").change(function(){var t=v(this).find(":selected").val();v(".everest-forms-lets-go-btn").click(function(){var e={action:"everest_forms_goto_edit_page",security:c.evf_goto_edit_page,page_id:t,form_id:i};v.ajax({url:c.ajax_url,type:"POST",data:e,success:function(e){e.success&&(window.location=e.data)}})})})}),v(".everest-forms-create-new-page").click(function(){v(".everest_forms_hide_container").hide();o='<div class="everest-forms-select-existing-post-container"><p>What would you like to call the new page?</p><div><input type="text" name="page_title"/><button class="everest-forms-lets-go-btn" style="cursor:pointer">Lets Go!</button></div><div style="cursor:pointer" class="everest-forms-show-container">Go Back</div></div>',v(" .everest-forms-show-exist-page").append(o),v(".everest-forms-show-container").click(function(){v(".everest_forms_hide_container").show(),v(".everest-forms-select-existing-post-container").remove()}),v(".everest-forms-lets-go-btn").click(function(){var e=v("[name='page_title']").val(),e={action:"everest_forms_goto_edit_page",security:c.evf_goto_edit_page,page_title:e,form_id:i};v.ajax({url:c.ajax_url,type:"POST",data:e,success:function(e){e.success&&(window.location=e.data)}})})})}})}})})},bindPreviewConfirmation:function(){v(".everest-preview-confirmation").each(function(){var e=v(this);const t=e.closest(".everest-forms-panel-field-toggle").next(".preview-confirm-select-wrapper");e.is(":checked")?t.show():t.hide(),e.on("change",function(){v(this).is(":checked")?t.show():t.hide()})})},bindSaveOptionWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"s"!==String.fromCharCode(e.which).toLowerCase()&&83!==e.which||(e.preventDefault(),v(".everest-forms-save-button").trigger("click"))})},bindOpenShortcutKeysModalWithKeyEvent:function(){v("body").on("keydown",function(e){var i;!e.ctrlKey&&!e.metaKey||"h"!==String.fromCharCode(e.which).toLowerCase()&&72!==e.which||(e.preventDefault(),i="",v.each(c.i18n_shortcut_keys,function(e,t){i+=`
								<ul class="evf-shortcut-keyword">
									<li>
										<div class="evf-shortcut-title">${t}</div>
									<div class="evf-key">
										<span>${e.split("+")[0]}</span>
										<span>${e.split("+")[1]}</span>
									</div>
									</li>
								</ul>
							`}),v.alert({title:c.i18n_shortcut_key_title,content:i,icon:"dashicons dashicons-info",type:"blue",boxWidth:"550px",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}},onContentReady:function(){v("body").on("keydown",function(e){(e.ctrlKey||e.metaKey&&"h"===String.fromCharCode(e.which).toLowerCase()||72===e.which)&&v(".btn-confirm").trigger("click")})}}))})},getStructure:function(){var e=v(".evf-admin-field-wrapper"),s=[];return v.each(e.find(".evf-admin-row"),function(){var e=v(this),n=e.attr("data-row-id");v.each(e.find(".evf-admin-grid"),function(){var e=v(this),i=e.attr("data-grid-id"),o=0;v.each(e.find(".everest-forms-field"),function(){var e={name:"",value:""},t=v(this).attr("data-field-id");e.name="structure[row_"+n+"][grid_"+i+"]["+o+"]",o++,e.value=t,s.push(e)}),e.find(".everest-forms-field").length<1&&s.push({name:"structure[row_"+n+"][grid_"+i+"]",value:""})})}),s},getFieldArray:function(e){var t=[];return v.each(e.find(".everest-forms-field"),function(){var e=v(this).attr("data-field-id");t.push(e)}),t},checkEmptyGrid:function(e){v.each(v(".evf-admin-grid"),function(){v(this).find(".everest-forms-field, .evf-registered-item:not(.ui-draggable-dragging)").not(".ui-sortable-helper").length<1?v(this).addClass("evf-empty-grid"):v(this).removeClass("evf-empty-grid")}),p.choicesInit()},bindDefaultTabs:function(){v(document).on("click",".evf-nav-tab-wrapper a",function(e){e.preventDefault(),p.switchTab(v(this).data("panel"))})},switchTab:function(e){var t=v("#everest-forms-panel-"+e),i=v(".evf-panel-"+e+"-button");v(".evf-nav-tab-wrapper").find("a").removeClass("nav-tab-active"),i.addClass("nav-tab-active"),t.closest(".evf-tab-content").find(".everest-forms-panel").removeClass("active"),t.addClass("active"),"integrations"!==e&&"payments"!==e||(t.find(".everest-forms-panel-sidebar a").hasClass("active")||t.find(".everest-forms-panel-sidebar a").first().addClass("active"),v(".everest-forms-panel-content").find(".evf-panel-content-section").hasClass("active"))||v(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active"),history.replaceState({},null,p.updateQueryString("tab",e)),p.switchPanel(e)},updateQueryString:function(e,t,i){i=i||window.location.href;var o,n=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");return n.test(i)?null!=t?i.replace(n,"$1"+e+"="+t+"$2$3"):(i=(o=i.split("#"))[0].replace(n,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof o[1]&&null!==o[1]&&(i+="#"+o[1]),i):(null!=t&&(n=-1!==i.indexOf("?")?"&":"?",i=(o=i.split("#"))[0]+n+e+"="+t,"undefined"!=typeof o[1])&&null!==o[1]&&(i+="#"+o[1]),i)},switchPanel:function(e){"field-options"===e&&p.switchToFieldOptionPanel()},switchToFieldOptionPanel:function(e){if(v(".everest-forms-field-options").find(".no-fields").hide(),v(".evf-admin-field-wrapper .everest-forms-field").removeClass("active"),v("#everest-forms-panel-fields").addClass("active"),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").last().addClass("active"),v(".everest-forms-add-fields").hide(),v(".everest-forms-field-options").show(),v(".everest-forms-field-options").find(".everest-forms-field-option").hide(),v(".evf-tab-lists").find("li a").removeClass("active"),v(".evf-tab-lists").find("li.evf-panel-field-options-button a").addClass("active"),v(document.body).trigger("evf-init-switch-field-options"),void 0!==e){if(0<v("#everest-forms-field-option-"+e).length){v("#everest-forms-field-option-basic-"+e).find(".everest-forms-field-option-group-inner").show();const t=v('<a href="#field-options"></a>').appendTo(document.body);t[0].click(),setTimeout(()=>{t.remove()},100)}v("#everest-forms-field-option-"+e).show(),v("#everest-forms-field-option-"+e).find(".everest-forms-field-option-group").each(function(){($field_options_element=v(this)).hasClass("everest-forms-field-option-group-basic")||$field_options_element.hasClass("open")&&($field_options_element.removeClass("open").addClass("closed"),$field_options_element.find(".everest-forms-field-option-group-inner").hide())}),v("#everest-forms-field-"+e).addClass("active")}else(0<v(".evf-admin-field-wrapper .everest-forms-field").length?(v(".evf-admin-field-wrapper .everest-forms-field").eq(0).addClass("active"),v("#everest-forms-field-option-"+v(".evf-admin-field-wrapper .everest-forms-field").eq(0).attr("data-field-id"))):v(".everest-forms-field-options").find(".no-fields")).show()},bindFields:function(){v(".evf-admin-field-wrapper").sortable({items:".evf-admin-row",axis:"y",cursor:"move",opacity:.65,scrollSensitivity:40,forcePlaceholderSize:!0,placeholder:"evf-sortable-placeholder",containment:".everest-forms-panel-content",start:function(e,t){t.item.css({backgroundColor:"#f7fafc",border:"1px dashed #5d96ee"})},stop:function(e,t){t.item.removeAttr("style")}}).disableSelection(),v(".evf-admin-grid").sortable({items:'> .everest-forms-field[data-field-type!="repeater-fields"]',delay:100,opacity:.65,cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,connectWith:".evf-admin-grid",appendTo:document.body,containment:".everest-forms-field-wrap",out:function(e){v(".evf-admin-grid").removeClass("evf-hover"),v(e.target).removeClass("evf-item-hover"),v(e.target).closest(".evf-admin-row").removeClass("evf-hover"),p.checkEmptyGrid()},over:function(e,t){t.item.hasClass("required")||t.item.find(".required").remove(),v(".evf-admin-grid").addClass("evf-hover"),v(e.target).addClass("evf-item-hover"),v(e.target).closest(".evf-admin-row").addClass("evf-hover"),p.checkEmptyGrid()},receive:function(e,t){t.sender.is("button")&&p.fieldDrop(t.helper)},update:function(e,t){v(document).trigger("evf_sort_update_complete",{event:e,ui:t})},stop:function(e,t){var i;t.item.hasClass("required")||0<(i=t.item.find(".label-title")).length&&i.append('<span class="required">*</span>'),t.item.removeAttr("style"),p.checkEmptyGrid()}}).disableSelection(),v(".evf-registered-buttons button.evf-registered-item").draggable({delay:200,cancel:!1,scroll:!1,revert:"invalid",scrollSensitivity:40,forcePlaceholderSize:!0,start:function(){v(this).addClass("field-dragged")},helper:function(){return v(this).clone().insertAfter(v(this).closest(".everest-forms-tab-content").siblings(".everest-forms-fields-tab"))},stop:function(){v(this).removeClass("field-dragged")},opacity:.75,containment:"#everest-forms-builder",connectToSortable:".evf-admin-grid"}).disableSelection(),v(".evf-registered-item.evf-repeater-field").draggable("option","connectToSortable",".evf-repeatable-grid"),v(".evf-admin-row").on("mouseenter mouseleave",function(e){e.buttons<1&&("mouseenter"===e.type?v(this).addClass("evf-hover"):v(".evf-admin-row").removeClass("evf-hover"))}),v(".everest-forms-panel-content").on("scroll",function(){v(".evf-admin-grid").sortable("refreshPositions"),v(".evf-admin-field-wrapper").sortable("refreshPositions")})},fieldTabChoice:function(e){v(".everest-forms-tab-content").scrollTop(0),v(".everest-forms-fields-tab a").removeClass("active"),v(".everest-forms-field, .everest-forms-title-desc").removeClass("active"),v("#"+e).addClass("active"),("add-fields"===e?(v(".everest-forms-add-fields").show(),v(".everest-forms-field-options")):(("field-options"===e?(e=v(".everest-forms-field").first().data("field-id"),v(".everest-forms-field-options").show(),v(".everest-forms-field").first()):v("#everest-forms-field-"+e)).addClass("active"),v(".everest-forms-field-option").hide(),v("#everest-forms-field-option-"+e).show(),v(".everest-forms-add-fields"))).hide()},bindFormPreview:function(){},bindFormPreviewWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"p"!==String.fromCharCode(e.which).toLowerCase()&&80!==e.which||(e.preventDefault(),window.open(c.preview_url))})},bindFormEntriesWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"e"!==String.fromCharCode(e.which).toLowerCase()&&69!==e.which||(e.preventDefault(),window.open(c.entries_url))})},bindGridSwitcher:function(){v("body").on("click",".evf-show-grid",function(e){e.stopPropagation(),p.checkEmptyGrid(),v(this).closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideToggle(200)}),v(document).on("click",function(){p.checkEmptyGrid(),v(".evf-show-grid").closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideUp(200)});v("body").on("click",".evf-grid-selector",function(){var e=v(this).closest(".evf-admin-row");if(!v(this).hasClass("active")){var t=parseInt(v(this).attr("data-evf-grid"),10);if(!(4<t)){var i=v('<div class="evf-admin-grid evf-grid-'+t+' ui-sortable evf-empty-grid" />'),o=v("<div/>");v.each(e.find(".evf-admin-grid"),function(){v(this).children("*").each(function(){o.append(v(this).clone())})}),e.find(".evf-admin-grid").remove(),e.find(".evf-clear ").remove(),e.append('<div class="clear evf-clear"></div>');for(var n=1;n<=t;n++)i.attr("data-grid-id",n),e.append(i.clone());e.append('<div class="clear evf-clear"></div>'),e.find(".evf-admin-grid").eq(0).append(o.html()),e.find(".evf-grid-selector").removeClass("active"),v(this).addClass("active"),p.bindFields()}}})},fieldDrop:function(r){var e=r.attr("data-field-type");if(["payment-total"].includes(e)&&r.closest(".evf-admin-row").hasClass("evf-repeater-fields"))return v.confirm({title:!1,content:"This field cannot be added to Repeater Fields",type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{cancel:{text:c.i18n_close,btnClass:"btn-default"}}}),r.remove(),!1;r.css({left:"0",width:"100%"}).append('<i class="spinner is-active"></i>'),v.ajax({url:c.ajax_url,type:"POST",data:{action:"everest_forms_new_field_"+e,security:c.evf_field_drop_nonce,field_type:e,form_id:c.form_id},beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){var t=e.data.preview,i=e.data.options,o=e.data.form_field_id,e=e.data.field.type,n=v(t).attr("id"),s=v(t).attr("data-field-id");v("#everest-forms-field-id").val(o),v(".everest-forms-field-options").find(".no-fields").hide(),v(".everest-forms-field-options").append(i),v(".everest-forms-field-option-row-icon_color input.colorpicker").wpColorPicker({change:function(e){var t=v(this),i=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");v("#everest-forms-field-"+t+" .rating-icon svg").css("fill",i)}}),r.after(t),null!==v("#everest-forms-panel-field-settings-enable_survey")&&v("#everest-forms-panel-field-settings-enable_survey").prop("checked")&&v("#everest-forms-field-option-"+s+"-survey_status").prop("checked",!0),null!==v("#everest-forms-panel-field-settings-enable_quiz")&&v("#everest-forms-panel-field-settings-enable_quiz").prop("checked")&&(v("#everest-forms-field-option-"+s+"-quiz_status").prop("checked",!0),v("#everest-forms-field-option-"+s+"-quiz_status").closest(".everest-forms-field-option-row-quiz_status").siblings(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden").addClass("everest-forms-show")),r.remove(),v(document.body).trigger("init_tooltips"),v(document.body).trigger("init_field_options_toggle"),v(document.body).trigger("evf_after_field_append",[n]),p.conditionalLogicAppendField(n),p.conditionalLogicAppendFieldIntegration(n),p.paymentFieldAppendToQuantity(n),p.paymentFieldAppendToDropdown(s,e),p.oneTimeDraggableField(s,e),p.init_datepickers(),p.init_payment_subscription_plan_field(),v("#everest-forms-field-option-"+s+"-enable_min_max_time").hide(),v("label[for=everest-forms-field-option-"+s+"-enable_min_max_time]").hide(),v("label[for=everest-forms-field-option-"+s+"-select_min_time]").hide(),v("label[for=everest-forms-field-option-"+s+"-select_max_time]").hide(),v("#everest-forms-field-option-"+s+"-min_time_hour").parent().hide(),v("#everest-forms-field-option-"+s+"-max_time_hour").parent().hide(),v(document.body).trigger("evf_field_drop_complete",[e,s,t,i]),p.checkEmptyGrid()}})},conditionalLogicAppendField:function(n){var e=v("#"+n),s=(e.index(),v(".evf-field-conditional-field-select")),r=e.attr("data-field-type"),a=e.attr("data-field-id"),d=e.find(".label-title .text ").text(),l=(v.fn.insertAt=function(e,t,i){var o=v.makeArray(this.children().clone(!0));o.splice(t,0,e),v.each(o,function(e,t){i===v(t)[0].value&&(v(t)[0].selected=!0,o[e]=t)}),this.empty().append(o)},a);s.each(function(o,e){var t=v(e).val(),i=n.replace("everest-forms-field-",""),e=v(e).attr("name");i===e.substring(e.indexOf("[")+1,e.indexOf("]"))?v(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=v(this).data("field-type"),t=v(this).data("field-id"),i=v(this).find(".label-title span").first().text();field_to_be_restricted=["html","title","address","image-upload","file-upload","date-time","hidden","scale-rating","likert","yes-no"],-1===v.inArray(e,field_to_be_restricted)&&l!==t&&0===s.eq(o).find('option[data-field_id="'+t+'"]').length&&s.eq(o).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(i='<option class="evf-conditional-fields" data-field_type="'+r+'" data-field_id="'+a+'" value="'+a+'">'+d+"</option>","html"!==r&&"title"!==r&&"address"!==r&&"image-upload"!==r&&"file-upload"!==r&&"hidden"!==r&&"likert"!==r&&"scale-rating"!==r&&"yes-no"!==r&&"divider"!==r&&s.eq(o).insertAt(i,1,t)),1<s.eq(o).find("option:not(.evf-conditional-fields)").length&&s.eq(o).find("option:not(.evf-conditional-fields):gt(0)").remove()})},conditionalLogicAppendRow:function(o){var n=v("#everest-forms-row-option-row_"+o);v(".everest-forms-field").each(function(){var e=v(this),t=e.attr("data-field-id"),i=e.attr("data-field-type"),e=(e.find(".required").remove(),'<option class="evf-conditional-fields" data-field_type="'+i+'" data-field_id="'+t+'" value="'+t+'">'+e.find(".label-title").html()+"</option>");0===v(document).find('.evf-admin-row[data-row-id="'+o+'"] #everest-forms-field-'+t).length&&0===n.find('.evf-field-conditional-field-select option[data-field_id="'+t+'"]').length&&"html"!==i&&"title"!==i&&"address"!==i&&"image-upload"!==i&&"file-upload"!==i&&"date-time"!==i&&"hidden"!==i&&"likert"!==i&&"scale-rating"!==i&&"divider"!==i&&n.find(".evf-field-conditional-field-select").append(e),1<n.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields)").length&&n.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields):gt(0)").remove(),n.hide()})},paymentFieldAppendToQuantity:function(e){var e=v("#"+e),t=v(".everest-forms-field-option-row-map_field select"),i=e.attr("data-field-type"),o=e.attr("data-field-id"),e=e.find(".label-title .text ").text();"payment-single"!==i&&"payment-multiple"!==i&&"payment-checkbox"!==i||t.append('<option value="'+o+'">'+e+"</option>")},paymentFieldAppendToDropdown:function(e,t){var i;"payment-quantity"!==t&&"payment-coupon"!==t&&"payment-subtotal"!==t||(i=v("#everest-forms-field-option-"+e+"-map_field"),["payment-checkbox","payment-multiple","payment-single","range-slider"].forEach(function(e){v(".everest-forms-field-"+e).each(function(){if("range-slider"===v(this).attr("data-field-type")){if("true"!==v(this).find(".evf-range-slider-preview").attr("data-enable-payment-slider"))return;var e='<option value="'+v(this).attr("data-field-id")+'">'+v(this).find(".label-title .text").text()+"</option>"}e='<option value="'+v(this).attr("data-field-id")+'">'+v(this).find(".label-title .text").text()+"</option>";i.append(e)})}))},oneTimeDraggableField:function(e,t){var i=c.form_one_time_draggable_fields,o=v("#everest-forms-add-fields-"+t);0<i.length&&0<=v.inArray(t,i)&&o.length&&o.addClass("evf-one-time-draggable-field")},conditionalLogicAppendFieldIntegration:function(i){var n=v("#"+i),s=n.index(),r=v(".evf-provider-conditional").find(".evf-conditional-field-select"),a=n.attr("data-field-type"),d=n.attr("data-field-id"),l=n.find(".label-title .text ").text();v.fn.insertAt=function(e,t){var i=v.makeArray(this.children().clone(!0));i.splice(t,0,e),this.empty().append(i)},r.each(function(o,e){var t=i.replace("everest-forms-field-",""),e=v(e).attr("name");t===e.substring(e.indexOf("[")+1,e.indexOf("]"))?v(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=v(this).data("field-type"),t=v(this).data("field-id"),i=v(this).find(".label-title span").first().text();field_to_be_restricted=[],field_to_be_restricted=["html","title","address","image-upload","file-upload","signature","divider","date-time","hidden","scale-rating","likert","yes-no",n.attr("data-field-type")],-1===v.inArray(e,field_to_be_restricted)&&r.eq(o).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(t='<option class="evf-conditional-fields" data-field_type="'+a+'" data-field_id="'+d+'" value="'+d+'">'+l+"</option>","html"!==a&&"title"!==a&&"address"!==a&&"image-upload"!==a&&"file-upload"!==a&&"date-time"!==a&&"hidden"!==a&&"likert"!==a&&"scale-rating"!==a&&"yes-no"!==a&&r.eq(o).insertAt(t,s))})},conditionalLogicRemoveField:function(e){v(".evf-field-conditional-field-select option[value = "+e+" ]").remove()},conditionalLogicRemoveFieldIntegration:function(e){v(".evf-provider-conditional .evf-conditional-field-select option[value = "+e+" ]").remove()},paymentFieldRemoveFromQuantity:function(e){v(".everest-forms-field-option-row-map_field select option[value = "+e+" ]").remove()},oneTimeDraggableRemoveField:function(e){e=v("#everest-forms-add-fields-"+e);e.hasClass("evf-one-time-draggable-field")&&(e.removeClass("upgrade-modal"),e.removeClass("evf-one-time-draggable-field"))},bindFieldSettings:function(){v("body").on("click",".everest-forms-preview .everest-forms-field, .everest-forms-preview .everest-forms-field .everest-forms-field-setting",function(e){e.preventDefault();e=v(this).closest(".everest-forms-field").attr("data-field-id");v(".everest-forms-tab-content").scrollTop(0),p.switchToFieldOptionPanel(e)})},toggleLabelEdit:function(e,t){v(e).toggleClass("everest-forms-hidden"),v(t).toggleClass("everest-forms-hidden"),v(t).is(":visible")&&v(t).focus()},bindToggleHandleActions:function(){v("body").on("click",".toggle-handle",function(e){var t=v(this).data("label"),i=v(this).data("input");v(i).is(":visible")||p.toggleLabelEdit(t,i)})},bindLabelEditInputActions:function(){v("body").on("focusout",".label-edit-input",function(e){var t=v(this).data("label");p.toggleLabelEdit(t,this)})},bindSyncedInputActions:function(){v("body").on("input",".sync-input",function(e){var t=v(this).val(),i=v(this).data("sync-targets");t&&i&&v(i).text(t)})},bindAkismetInit:function(){var e=v(document).find("#everest-forms-panel-field-settings-akismet");p.akismetTogger(e),v(document).on("change","#everest-forms-panel-field-settings-akismet",function(){p.akismetTogger(v(this))})},akismetTogger:function(e){v(e).is(":checked")?v(document).find(".everest-forms-akismet-protection-type").show():v(document).find(".everest-forms-akismet-protection-type").hide()},bindFormSubmissionMinWaitingTime:function(){var e=v(document).find("#everest-forms-panel-field-settings-form_submission_min_waiting_time");p.formSubmissionMinTimeToggler(e),v(document).on("change","#everest-forms-panel-field-settings-form_submission_min_waiting_time",function(){p.formSubmissionMinTimeToggler(v(this))})},formSubmissionMinTimeToggler:function(e){v(e).is(":checked")?v(document).find(".everest-forms-form-submission-minimum-waiting-time").show():v(document).find(".everest-forms-form-submission-minimum-waiting-time").hide()},bindEditMetaKey:function(e=""){function t(e){e.wrap('<div class="evf-meta-key-input-wrapper"></div>'),e.before(`<span class="evf-edit-meta-key-icon" data-meta_key="${e.val()}">Edit</span>`);var t=v(`
					<span class="evf-meta-key-copy-btn" data-copied="Copied!" data-tip="Copy to clipboard">
						<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M15.002 5.99902H7.50195C6.67353 5.99902 6.00195 6.6706 6.00195 7.49902V14.999C6.00195 15.8274 6.67353 16.499 7.50195 16.499H15.002C15.8304 16.499 16.502 15.8274 16.502 14.999V7.49902C16.502 6.6706 15.8304 5.99902 15.002 5.99902Z" stroke="#6B6B6B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						<path d="M3.00195 11.999C2.17695 11.999 1.50195 11.324 1.50195 10.499V2.99902C1.50195 2.17402 2.17695 1.49902 3.00195 1.49902H10.502C11.327 1.49902 12.002 2.17402 12.002 2.99902" stroke="#6B6B6B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</span>
				`);e.after(t),t.tooltipster({theme:"tooltipster-default",delay:100,side:"top",updateAnimation:"null"})}v(document).on("click",".evf-meta-key-copy-btn",function(){var e=v(this).closest(".evf-meta-key-input-wrapper").find(".evf-input-meta-key").val();v(this).tooltipster("content",v(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=v(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},1e3)}),navigator.clipboard.writeText(e)}),""===e?v(document).find(".evf-input-meta-key").each(function(){t(v(this))}):t(v("#everest-forms-field-option-"+e+"-meta-key"))},bindPrivacyPolicyActions:function(){v(document.body).on("input",".everest-forms-field-option .evf-privacy-policy-consent-message",function(e){var t=p.processSyntaxes(v(this).val());v(".everest-forms-field.active").find(".evf-privacy-policy-consent-message").html(t)}),v(document.body).on("click",".everest-forms-field-option .evf-add-local-privacy-policy-page",function(e){var t=v(".everest-forms-field-option:visible .evf-privacy-policy-consent-message").val(),i=v(".everest-forms-field-option:visible .evf-select-local-privacy-policy-page").val(),o=v(".everest-forms-field-option:visible .evf-select-local-privacy-policy-page option:selected").html();i&&(t+="["+o+"](?page_id="+i+")",v(".everest-forms-field-option:visible .evf-privacy-policy-consent-message").val(t),t=p.processSyntaxes(t),v(".everest-forms-field.active").find(".evf-privacy-policy-consent-message").html(t))}),v(document.body).on("click",".everest-forms-field-option .evf-privacy-policy-add-custom-url",function(e){var t=v(".everest-forms-field-option:visible .evf-privacy-policy-consent-message").val(),i=v(".everest-forms-field-option:visible .evf-privacy-policy-custom-link-label").val().trim(),o=v(".everest-forms-field-option:visible .evf-privacy-policy-custom-link-url").val().trim();""!==(o=o.search("http")<0?"http://"+o:o)&&(t+="["+i+"]("+o+")",v(".everest-forms-field-option:visible .evf-privacy-policy-consent-message").val(t),t=p.processSyntaxes(t),v(".everest-forms-field.active").find(".evf-privacy-policy-consent-message").html(t),v(".everest-forms-field-option:visible .evf-privacy-policy-custom-link-label").val(""),v(".everest-forms-field-option:visible .evf-privacy-policy-custom-link-url").val(""))})},processSyntaxes:function(e){return e=e.replace(/^\s+/g,""),e=p.processHyperlinkSyntax(e),e=p.process_italic_syntax(e),e=p.process_bold_syntax(e),e=p.process_underline_syntax(e),e=p.process_new_lines(e)},processHyperlinkSyntax:function(e){for(var t=new RegExp(/(\[[^\[\]]*\])(\([^\(\)]*\))/g);matches=t.exec(e);){var i=matches[0],o=matches[1],n=matches[2],o=o.substring(1,o.length-1),n=n.substring(1,n.length-1);e=""!==o||""!==n?(""===n&&(n="#"),""===o&&(o=n),e.replace(i,'<a href="'+n+'">'+o+"</a>")):e.replace(i,"")}return e},process_italic_syntax:function(e){var t=new RegExp(/`[^`]+`/g);for(e=e.split("\\`").join("<&&&&&>");matches=t.exec(e);){var i=matches[0],o=i.trim().substring(1,i.length-1);e=e.replace(i,"<i>"+o+"</i>")}return e.split("<&&&&&>").join("`")},process_bold_syntax:function(e){var t=new RegExp(/\*[^*]+\*/g);for(e=e.split("\\*").join("<&&&&&>");matches=t.exec(e);){var i=matches[0],o=i.trim().substring(1,i.length-1);e=e.replace(i,"<b>"+o+"</b>")}return e.split("<&&&&&>").join("*")},process_underline_syntax:function(e){var t=new RegExp(/__[^_]+__/g);for(e=e.split("\\_").join("<&&&&&>");matches=t.exec(e);){var i=matches[0],o=i.trim().substring(2,i.length-2);e=e.replace(i,"<u>"+o+"</u>")}return e.split("<&&&&&>").join("_")},process_new_lines:function(e){return e.split("\n").join("<br/>")},livePreviewNumberOfRating:function(e){var e=v(e),t=e.val(),i=((0==t.length||t<=0)&&(t=1),e.parent().data("field-id")),o=v("#everest-forms-field-"+i+" .rating-icon").first();if(t<=100){v("#everest-forms-field-"+i+" .rating-icon").remove();for(var n=1;n<=t;n++)v("#everest-forms-field-"+i).append(o.clone())}},bindFormTags:function(){}};p.init()}(jQuery,window.evf_data),jQuery(function(r){function a(e,t){e=r(e).closest(".everest-forms-border-container");e.find(".form-state-hide, .form-state-reset").hide(),"hide"===t?(e.find(".form-state-hide").show(),e.find(".preview-confirmation-toggle-wrapper").show(),e.find(".everest-preview-confirmation").is(":checked")?e.find(".preview-confirm-select-wrapper").show():e.find(".preview-confirm-select-wrapper").hide()):"reset"===t&&(e.find(".preview-confirmation-toggle-wrapper").hide(),e.find(".preview-confirm-select-wrapper").hide(),e.find(".form-state-reset").show())}function d(e){var t=e.find(".query-string-wrap"),i=e.find(".append-query-string-input");t.toggle(i.is(":checked")),e.on("change",".append-query-string-input",function(){t.toggle(r(this).is(":checked"))})}"checked"!=r("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").attr("checked")&&r("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide(),r("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").on("change",function(){"checked"!=r(this).attr("checked")?r("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide():r("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().show()}),window.pageType=function(e,t){var i,o,n=r(e).closest(".evf-confirmation-wrap");if(e.is(":checked"))switch(t){case"same":r(n).find(".same-page-setting").show(),n.find(".external-page-setting, .custom-page-setting").hide(),n.find(".custom-and-external-page-setting").hide();var s=(e=n.find(".form-state-type:checked")).val();a(e,s),s=e,o=(i=n).find(".preview-confirm-select-wrapper"),"reset"==s.val()?o.toggle(!1):(s=i.find(".everest-preview-confirmation"),o.toggle(s.is(":checked")),i.on("change",".everest-preview-confirmation",function(){o.toggle(r(this).is(":checked"))})),n.off("change",".form-state-type").on("change",".form-state-type",function(){a(r(this),r(this).val())}),n.on("change",".everest-preview-confirmation",function(){var e,i="",t=(e=r(this).is(":checked")?[{value:"top",label:"Above Form Summary"},{value:"bottom",label:"Below Form Summary"},{value:"popup",label:"As Popup"}]:[{value:"hide",label:"Shown Message in Place of Form"},{value:"popup",label:"As Popup"}],n.find(".form-state-hide select"));t.empty(),r.each(e,function(e,t){i+=`<option value="${t.value}">${t.label}</option>`}),t.html(i),setTimeout(function(){t.trigger("change")},50)});break;case"custom_page":n.find(".custom-page-setting").show(),n.find(".custom-and-external-page-setting").show(),n.find(".same-page-setting, .external-page-setting").hide(),d(n);break;case"external_url":n.find(".external-page-setting").show(),n.find(".custom-and-external-page-setting").show(),n.find(".same-page-setting, .custom-page-setting").hide(),d(n);break;default:console.warn("Unknown redirect type:",t)}},r(function(t){t(".confirmation-redirect-to").each(function(){var e=t(this).val();window.pageType(t(this),e)}),t(document).on("change",".confirmation-redirect-to",function(){window.pageType(t(this),t(this).val())})}),r(".evf-panel-field-options-button.evf-disabled-tab").hide()}),jQuery(function(c){function i(e,t){var o='<option value=""> -- Select Field -- </option>';const n=["first-name","last-name","text","textarea"];c.each(t,function(e,t){var i=c(t).data("field-type");n.includes(i)&&(i=c(t).find(".label-title"),i=c(i).find(".text").text(),t=c(t).data("field-id"),o+="<option value="+t+">"+i+"</option>")}),c(e).html(o)}c(document.body).on("init_add_fields_toogle",function(){c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group > a",function(e){e.preventDefault(),c(this).parent(".everest-forms-add-fields-group").toggleClass("closed").toggleClass("open")}),c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group a",function(){c(this).next(".evf-registered-buttons").stop().slideToggle()}),c(".everest-forms-add-fields-group.closed").each(function(){c(this).find(".evf-registered-buttons").hide()})}).trigger("init_add_fields_toogle"),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group > a",function(e){e.preventDefault();var e=c(this).closest(".everest-forms-field-option-group").closest(".everest-forms-field-option"),t=c(this).parent(".everest-forms-field-option-group").attr("id");e.find(".everest-forms-field-option-group").each(function(){var e=c(this).attr("id");t!==e&&c(this).removeClass("open").addClass("closed")}),c(this).parent(".everest-forms-field-option-group").toggleClass("closed").toggleClass("open"),c(".everest-forms-field-option-group.closed").each(function(){c(this).find(".everest-forms-field-option-group-inner").hide()})}),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group a",function(e){var t;c(e.target).filter(":input, option, .sort").length||(c(this).next(".everest-forms-field-option-group-inner").stop().slideToggle(),(e=c(this).closest(".everest-forms-field-option-group")).length&&!e.hasClass("everest-forms-field-option-group-basic")&&((t=c("<a>",{id:"evf-temp-link",href:"#field-options"})).insertBefore(e),t[0].click(),setTimeout(function(){t.remove()},100)))}),c(document.body).on("init_field_options_toggle",function(){c(".everest-forms-field-option-group.closed").each(function(){c(this).find(".everest-forms-field-option-group-inner").hide()})}).trigger("init_field_options_toggle"),c(document).on("click",function(){c(".evf-smart-tag-lists").hide()}),c(".evf-smart-tag-lists").hide(),c(document.body).on("click",".evf-toggle-smart-tag-display",function(e){e.stopPropagation(),c(".evf-smart-tag-lists").hide(),c(".evf-smart-tag-lists ul").empty(),c(this).parent().find(".evf-smart-tag-lists").toggle("show");var t,i,e=c(this).data("type"),o=c(this).data("fields"),n=c(this),s=[],r=[],a=[];if(c(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e,t=c(this).data("field-type"),i=c(this).data("field-id");"email"===t?(e=c(this).find(".label-title span").first().text(),r[i]=e):"phone"===t?(e=c(this).find(".label-title span").first().text(),a[i]=e):(t=c(this).find(".label-title span").first().text(),i,0),s[i]=c(this).find(".label-title span").first().text()}),"other"===e||"all"===e){var d=evf_data.smart_tags_other;for(l in d)c(n).parent().find(".evf-smart-tag-lists .evf-others").append('<li class = "smart-tag-field" data-type="other" data-field_id="'+l+'">'+d[l]+"</li>")}if("regex"==e&&evf_data.regex_expression_lists.forEach(function(e,t){c(n).parent().find(".evf-smart-tag-lists .evf-regex").append('<li class = "smart-tag-field" data-type="regex" data-field_id="'+e.value+'">'+e.text+"</li>")}),"fields"===e||"all"===e)if("email"===o)for(var l in Object.keys(r).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(n).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(n).parent().find(".evf-smart-tag-lists .evf-others").remove(),c(n).parent().find(".evf-smart-tag-lists").append('<div class="smart-tag-title other-tag-title">Others</div><ul class="evf-others"></ul>'),c(n).parent().find(".evf-smart-tag-lists .evf-others").append('<li class="smart-tag-field" data-type="other" data-field_id="admin_email">Site Admin Email</li><li class="smart-tag-field" data-type="other" data-field_id="user_email">User Email</li>'),r)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+r[l]+"</li>");else if("phone"===o)for(var l in Object.keys(a).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(n).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(n).parent().find(".evf-smart-tag-lists .evf-others").remove(),a)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+a[l]+"</li>");else for(var f in Object.keys(s).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),s)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+f+'">'+s[f]+"</li>");"calculations"===e&&(t=["number","payment-single","range-slider","payment-checkbox","payment-multiple","select","payment-total","radio","first-name","text","last-name","email","url"],c(document).find(".everest-forms-field").each(function(){$fieldId=c(this).attr("data-field-id").split("-"),t.includes(c(this).attr("data-field-type"))&&c(n).parents(".everest-forms-field-option-row-calculation_field").attr("data-field-id")!==c(this).attr("data-field-id")&&c(n).parent().find(".evf-smart-tag-lists .calculations").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+$fieldId[1]+'">'+c(this).find(".label-title .text").text()+"</li>")})),"ai-fields"===e&&(i=["text","select","radio"],c(document).find(".everest-forms-field").each(function(){i.includes(c(this).attr("data-field-type"))&&c(n).parents(".everest-forms-field-option-row-ai_chatbot_input").attr("data-field-id")!==c(this).attr("data-field-id")&&c(n).parent().find(".evf-smart-tag-lists .evf-fields-ai").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+c(this).attr("data-field-id")+'">'+c(this).find(".label-title .text").text()+"</li>")}))}),c(document.body).on("click",".smart-tag-field",function(e){var t=c(this).data("field_id"),i=c(this).text(),o=c(this).data("type"),n=c(this).parent().parent().parent(),s=n.find("input[type=text]"),r=n.find("textarea"),n=n.find(".CodeMirror");if(0==n.length){if("fullname"!==t&&"email"!==t&&"subject"!==t&&"message"!==t&&"other"!==o){for(var i=i.split(/[\s-_]/),a=0;a<i.length;a++)i[a]=0===a?i[a].charAt(0).toLowerCase()+i[a].substr(1):i[a].charAt(0).toUpperCase()+i[a].substr(1);t=(i=i.join(""))+"_"+t}"field"===o?(s.val(s.val()+'{field_id="'+t+'"}'),r.val(r.val()+'{field_id="'+t+'"}'),r.trigger("change")):"other"===o?(s.val(s.val()+"{"+t+"}"),r.val(r.val()+"{"+t+"}")):"regex"===o&&(s.val(s.val()+t.replace(i+"_","")),r.val(r.val()+t.replace(i+"_","")))}}),c(document).on("change",".wp-list-table .everest-forms-toggle-form input",function(e){e.stopPropagation(),e=c(this).prop("checked")?(c(this).closest("tr").find("td").not(".has-row-actions").removeClass("evf-disable-row"),c(document).find(".everest-forms-list-filters-row").find(".inactive").find("span.count").text().replace(/\((\d+)\)/,function(e,t){t=parseInt(t,10);return"("+--t+")"})):(c(this).closest("tr").find("td").not(".has-row-actions").addClass("evf-disable-row"),c(document).find(".everest-forms-list-filters-row").find(".inactive").find("span.count").text().replace(/\((\d+)\)/,function(e,t){t=parseInt(t,10);return"("+(t+=1)+")"})),c(document).find(".everest-forms-list-filters-row").find(".inactive").find("span.count").text(e),c.post(evf_data.ajax_url,{action:"everest_forms_enabled_form",security:evf_data.evf_enabled_form,form_id:c(this).data("form_id"),enabled:c(this).prop("checked")?1:0})}),c(document).on("change",".evf-content-email-settings .evf-toggle-switch input",function(e){var t=c(this),i=t.prop("checked"),o=t.data("connection-id");!1===i?(t.val(""),t.closest(".evf-content-email-settings").find(".email-disable-message").remove(),t.closest(".evf-content-section-title").find(".evf-enable-email-toggle").removeClass("everest-forms-hidden"),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").addClass("everest-forms-hidden"),c('<p class="email-disable-message everest-forms-notice everest-forms-notice-info">'+evf_data.i18n_email_disable_message+"</p>").insertAfter(t.closest(".evf-content-section-title")),c('input[data-connection-id="'+o+'"]').prop("checked",!1)):!0===i&&(t.val("1"),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").removeClass("everest-forms-hidden"),t.closest(".evf-content-email-settings").find(".email-disable-message").remove(),t.closest(".evf-content-section-title").find(".evf-enable-email-toggle").addClass("everest-forms-hidden"),c('input[data-connection-id="'+o+'"]').prop("checked",!0))}),c(document).on("change",".evf-email-toggle",function(e){var t=c(this),i=t.data("connection-id");(t.prop("checked")?(t.val("1"),c(".evf-content-email-settings").find('input[type="checkbox"][data-connection-id="'+i+'"]').prop("checked",!0)):(t.val(""),c(".evf-content-email-settings").find('input[type="checkbox"][data-connection-id="'+i+'"]').prop("checked",!1))).trigger("change")}),c(document).on("click",".everest-forms-min-max-date-format input",function(){var e,t=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val(),i=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val();c(this).is(":checked")?((e=c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format")).find('input[type="checkbox"]').is(":checked")?(e.next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),e.next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden")):(e.next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),e.next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden")),c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format").removeClass("everest-forms-hidden"),""===t&&c(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",c(".everest-forms-max-date").val())}}),""===i&&c(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",c(".everest-forms-min-date").val())}})):(c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format").addClass("everest-forms-hidden"))}),c(document).on("click",'.everest-forms-min-max-date-range-format input[type="checkbox"]',function(){c(this).is(":checked")?(c(this).parent().parent().parent().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden")):(c(this).parent().parent().parent().next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"))}),c(document).on("change",".appt-sched-google-calendar-advanced",function(e){c(this).is(":checked")?c(".everest-form-appt-sched-google-event-section").removeClass("everest-forms-hidden"):c(".everest-form-appt-sched-google-event-section").addClass("everest-forms-hidden")}),c(document).on("focus",".appt-sched-google-calendar-event-title-field",function(e){var t=c(".evf-admin-field-wrapper").find(".everest-forms-field");i(c(this),t)}),c(document).on("focus",".appt-sched-google-calendar-event-desc-field",function(e){var t=c(".evf-admin-field-wrapper").find(".everest-forms-field");i(c(this),t)})}),jQuery(function(s){s(document).ready(function(){const e=s("#everest-forms-panel-field-settings-evf-custom-css");var t,i;e.length&&"undefined"!=typeof wp.CodeMirror&&(t=wp.CodeMirror.fromTextArea(e[0],{indentUnit:2,indentWithTabs:!0,inputStyle:"contenteditable",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,continueComments:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-F":"findPersistent"},direction:"ltr",gutters:[],mode:"text/css",lint:!1,autoCloseBrackets:!0,autoCloseTags:!0,autoRefresh:!0,matchTags:{bothTags:!0},tabSize:2,theme:"default"})).on("change",function(){e.html(t.getValue().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))});const o=s("#everest-forms-panel-field-settings-evf-custom-js");function n(){s("#everest-forms-panel-field-settings-evf-enable-custom-css").is(":checked")?s("#everest-forms-panel-field-settings-evf-custom-css-wrap").show(500):s("#everest-forms-panel-field-settings-evf-custom-css-wrap").hide(500),s("#everest-forms-panel-field-settings-evf-enable-custom-js").is(":checked")?s("#everest-forms-panel-field-settings-evf-custom-js-wrap").show(500):s("#everest-forms-panel-field-settings-evf-custom-js-wrap").hide(500)}o.length&&"undefined"!=typeof wp.CodeMirror&&(i=wp.CodeMirror.fromTextArea(o[0],{indentUnit:2,indentWithTabs:!0,inputStyle:"contenteditable",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,continueComments:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-F":"findPersistent"},direction:"ltr",gutters:[],mode:"javascript",lint:!1,autoCloseBrackets:!0,autoCloseTags:!0,autoRefresh:!0,matchTags:{bothTags:!0},tabSize:2})).on("change",function(){o.html(i.getValue().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))}),s("#everest-forms-panel-field-settings-evf-enable-custom-css, #everest-forms-panel-field-settings-evf-enable-custom-js").on("change",e=>{n()}),n()})});